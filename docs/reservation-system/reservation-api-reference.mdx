---
title: '예약 시스템 API 레퍼런스'
description: '예약 시스템 REST API 및 tRPC 엔드포인트 상세 문서'
icon: 'code'
---

## 개요

LG 멤버십 예약 시스템은 다음 일곱 가지 핵심 리소스로 구성됩니다:

| 리소스 | 설명 | 예시 |
| --- | --- | --- |
| **예약 호스트** | 예약 가능한 장소의 최상위 개념 | SKS 레스토랑 강남점, SKS 레스토랑 판교점 |
| **예약 스페이스** | 호스트 내 정보성 공간 (UI 표시용) | 다이닝룸, 프라이빗 룸, 테라스 |
| **예약 섹션** | 호스트 내 실제 예약 관리 단위 | 메인 홀, 프라이빗 룸 |
| **예약 유닛** | 섹션 내 구체적인 예약 단위 | 테이블 T1-T10, 룸 R1-R5 |
| **예약 컨텐츠** | 호스트에서 진행되는 구체적인 이벤트/프로그램 | 런치 코스, 디너 코스, 와인 디너 |
| **예약 타임슬롯** | 컨텐츠의 특정 시간대 | 2025년 6월 1일 12:00-14:00 (런치), 18:00-20:00 (디너) |
| **예약** | 사용자가 특정 타임슬롯에 신청한 예약 정보 | 멤버십 번호 123456이 신청한 4명 예약 |

각 리소스는 관리자용(Admin)과 사용자용(App) 두 가지 인터페이스로 API가 제공됩니다.

## API 공통 정보

### 기술 스택

- **백엔드**: tRPC + trpc-openapi, PostgreSQL (Prisma ORM)
- **API 인터페이스**:
  - tRPC: 타입 안전성이 보장되는 기본 API 인터페이스
  - REST: trpc-openapi를 통해 기존 tRPC 라우터를 REST API로도 노출
- **인증**: JWT 기반

### 인증 및 권한

- **관리자 API**: 모든 API 호출 시 인증 필요(JWT)
- **앱 API**: 대부분 인증 불필요(public), 일부 회원 전용 기능만 인증 필요
- **권한 레벨**:
  - publicProcedure: 인증 없이 접근 가능
  - memberProtectedProcedure: 일반 회원만 접근 가능
  - adminProtectedProcedure: 관리자/스태프만 접근 가능

### 응답 상태 코드

- **성공**: 200 OK (데이터 반환 또는 반환 없음)
- **에러**: 400, 401, 403, 404, 409, 500 등 상황에 따라 다름

### 페이지네이션 응답 포맷

목록 조회 API는 항상 아래 포맷으로 응답합니다:

```json
{
  "list": [
    // 해당 리소스의 객체 배열
  ],
  "page": 1,          // [필수] 현재 페이지
  "pageSize": 20,     // [필수] 페이지당 항목 수
  "pageCount": 5,     // [필수] 총 페이지 수
  "totalCount": 100   // [필수] 총 항목 수
}
```

## 데이터 모델 관계도

```mermaid
erDiagram
    ReservationHost ||--o{ ReservationSpace : "has (informational)"
    ReservationHost ||--o{ ReservationSection : "has (operational)"
    ReservationHost ||--o{ ReservationContent : "hosts"
    ReservationSpace }o--o{ ReservationContent : "displays in"
    ReservationSection ||--o{ ReservationUnit : "contains"
    ReservationContent ||--o{ ReservationTimeSlot : "scheduled at"
    ReservationContent ||--o{ ReservationPriceItem : "has pricing"
    ReservationContent ||--o{ Terms : "has"
    ReservationTimeSlot ||--o{ Reservation : "booked for"
    ReservationSection }o--o| Reservation : "optionally manages"
    ReservationUnit }o--o| Reservation : "optionally assigned"
    Reservation }o--o| CouponPool : "may use"
    Reservation ||--o{ ReservationHist : "has"
    Member ||--o{ Reservation : "makes"
    Member ||--o{ TermsAgreement : "agrees to"
    Member ||--o{ CouponPool : "owns"
    Admin ||--o{ ReservationHist : "creates"
    Terms ||--o{ TermsAgreement : "has"
    TermsAgreement ||--o{ TermsAgreementHist : "has"
    Coupon ||--o{ CouponPool : "has"
    CouponPool ||--o{ CouponPoolHist : "has"

    ReservationHost {
        UUID id PK
        ReservationHostKind kind
        String name
        Json address
        String phoneNumber
        Json operatingHours
        Json holidays
        String[] images
        String description
        String instructions
        DateTime displayStartAt
        DateTime displayEndAt
        DateTime operatingStartAt
        DateTime operatingEndAt
        Boolean isActive
    }

    ReservationSpace {
        UUID id PK
        UUID hostId FK
        String name
        String description
        Json metadata
        Boolean isActive
    }

    ReservationSection {
        UUID id PK
        UUID hostId FK
        String name
        String description
        Json metadata
        Boolean isActive
    }

    ReservationUnit {
        UUID id PK
        UUID sectionId FK
        String code UK
        String name
        String description
        Int minCapacity
        Int maxCapacity
        Json metadata
        String index
        Boolean isActive
    }

    ReservationContent {
        UUID id PK
        UUID hostId FK
        UUID spaceId FK "optional"
        String name
        String description
        String[] images
        String instructions
        Json contactInfo
        Json restrictionConfig
        Json confirmConfig
        DateTime displayStartAt
        DateTime displayEndAt
        DateTime openStartAt
        DateTime openEndAt
        DateTime operatingStartAt
        DateTime operatingEndAt
        Boolean isActive
    }

    ReservationTimeSlot {
        UUID id PK
        UUID contentId FK
        DateTime startAt
        DateTime endAt
        Int minGroupSize
        Int maxGroupSize
        Int totalCapacity
        Int visitIntervalMinutes
        Json openConfig
        Boolean isActive
    }

    ReservationPriceItem {
        UUID id PK
        UUID contentId FK
        ReservationPriceKind kind
        String name
        String description
        String[] images
        Int basePrice
        ReservationPriceType priceType
        Int minQuantity
        Int maxQuantity
        String index
        Boolean isActive
    }

    Reservation {
        UUID id PK
        String sn UK
        UUID timeSlotId FK
        UUID sectionId FK "optional"
        UUID unitId FK "optional"
        UUID memberId FK
        UUID couponPoolId FK "optional"
        ReservationStatus status
        Int groupSize
        String phoneNumber
        String gradeAtIssue
        String requestNote
        Json additionalInfo
        DateTime createdAt
        DateTime updatedAt
    }

    ReservationHist {
        Int id PK
        UUID reservationId FK
        UUID adminId FK "optional"
        ReservationStatus status
        String reasonCode
        Json changes
        String note
        DateTime createdAt
    }

    Terms {
        UUID id PK
        UUID contentId FK
        TermsKind kind
        String sn
        String name
        Int rev
        String content
        String link
        Boolean isMandatory
        String index
        Boolean isActive
    }

    TermsAgreement {
        UUID id PK
        UUID termsId FK
        UUID memberId FK
        Boolean isAgreed
        DateTime createdAt
        DateTime updatedAt
    }

    TermsAgreementHist {
        Int id PK
        UUID termsAgreementId FK
        Boolean isAgreed
        DateTime createdAt
    }

    CouponPool {
        UUID id PK
        UUID couponId FK
        UUID memberId FK
        String sn UK
        CouponPoolStatus status
        String gradeAtIssue
        DateTime issuedAt
        DateTime redeemedAt
    }

    CouponPoolHist {
        Int id PK
        UUID couponPoolId FK
        CouponPoolStatus status
        String note
        DateTime createdAt
    }

    Coupon {
        UUID id PK
        CouponKind kind
        String name
        String description
        CouponDiscountType discountType
        Decimal discountValue
        Decimal maxDiscount
    }

    Member {
        UUID id PK
        String memNo UK
        String name
        String phoneNumber
        String email
        Boolean isActive
    }

    Admin {
        UUID id PK
        String email UK
        String name
        String phoneNumber
        Boolean isActive
    }
```

**주요 관계 설명:**

1. **Host - Space/Section 관계**:
   - Host는 Space(정보성)와 Section(운영용)을 모두 가짐
   - Space는 UI 표시용으로만 사용
   - Section은 실제 예약 운영 단위

2. **Content - Space 관계**:
   - Content는 Space와 연결되어 UI에서 표시 위치를 나타냄
   - Content는 Section과 직접 연결되지 않음

3. **Section - Unit 관계**:
   - Unit은 Section에 속하며 Section 간 이동 불가
   - Unit은 예약 시 선택적으로 할당

4. **Reservation 관계**:
   - Section과 Unit 모두 선택적으로 사용
   - 예약 유형별 패턴:
     - 자유 예약: Section/Unit 모두 미지정 (자유석 공연 등)
     - 구역 예약: Section만 지정 (레스토랑 홀/룸 선택)
     - 지정석 예약: Section + Unit 지정 (특정 좌석/테이블)

## 주요 데이터 타입 및 스키마

### 예약 상태 (ReservationStatus)

```typescript
enum ReservationStatus {
  PENDING = "PENDING",     // 예약 대기
  CONFIRMED = "CONFIRMED", // 예약 확정
  USED = "USED",          // 이용 완료
  CANCELLED = "CANCELLED", // 예약 취소
  NOSHOW = "NOSHOW"       // 노쇼
}
```

### 예약 확정 유형 (ConfirmType)

```typescript
export const ConfirmType = {
  IMMEDIATE: 'IMMEDIATE',         // 즉시 확정
  ADMIN_APPROVAL: 'ADMIN_APPROVAL', // 관리자 승인
  LOTTERY: 'LOTTERY',            // 추첨
} as const;
```

### 예약 오픈 타입 (OpenType)

```typescript
export const OpenType = {
  BATCH: 'BATCH',       // 일괄 오픈
  SEQUENTIAL: 'SEQUENTIAL', // 순차 오픈
  GRADED: 'GRADED',     // 등급별 차등 오픈
} as const;
```

### 호스트 종류 (ReservationHostKind)

```typescript
enum ReservationHostKind {
  ART_CENTER = "ART_CENTER",     // LG 아트센터
  RESTAURANT = "RESTAURANT",     // SKS 레스토랑
}
```

## App API (사용자용)

### 예약 호스트 조회

#### GET /external/app/reservation/hosts

예약 호스트 목록을 조회합니다.

**인증**: 불필요

**요청 파라미터**:
- `kind`: [선택] 호스트 종류 (ART_CENTER, RESTAURANT)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 10, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "770e8400-e29b-41d4-a716-446655440000",
      "kind": "RESTAURANT",
      "name": "SKS 레스토랑 강남점",
      "address": {
        "zipCode": "06159",
        "mainAddress": "서울시 강남구 테헤란로 123",
        "detailAddress": "SKS빌딩 1층"
      },
      "phoneNumber": "02-1234-5678",  // nullable
      "operatingStartAt": "2025-01-01T00:00:00.000Z",  // nullable
      "operatingEndAt": "2025-12-31T23:59:59.000Z",  // nullable
      "operatingHours": [
        {
          "days": ["MON", "TUE", "WED", "THU", "FRI"],
          "hours": [
            {
              "openTime": "11:30",
              "closeTime": "14:30"
            },
            {
              "openTime": "17:30",
              "closeTime": "22:00"
            }
          ]
        }
      ],
      "holidays": {  // nullable
        "regular": {
          "weekly": ["SUN"],
          "monthly": [],
          "yearly": [
            {"month": 1, "day": 1},
            {"month": 12, "day": 25}
          ]
        },
        "specific": ["2025-02-08", "2025-02-09"]
      },
      "description": "프리미엄 다이닝 레스토랑",
      "images": [
        "https://example.com/restaurant/gangnam-1.jpg",
        "https://example.com/restaurant/gangnam-2.jpg"
      ],
      "instructions": "예약 시 알레르기 사전 고지 부탁드립니다",  // nullable
      "spaces": [
        {
          "id": "880e8400-e29b-41d4-a716-446655440000",
          "name": "메인 홀"
        },
        {
          "id": "990e8400-e29b-41d4-a716-446655440000",
          "name": "프라이빗 룸"
        }
      ]
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 3
}
```

### 예약 스페이스 조회

#### GET /external/app/reservation/spaces

예약 스페이스(정보성) 목록을 조회합니다.

**인증**: 불필요

**요청 파라미터**:
- `hostId`: [필수] 호스트 ID (UUID)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 10, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "880e8400-e29b-41d4-a716-446655440000",
      "name": "메인 홀",
      "description": "최대 100명 수용 가능한 메인 다이닝 공간"
    },
    {
      "id": "990e8400-e29b-41d4-a716-446655440000",
      "name": "프라이빗 룸",
      "description": "소규모 모임을 위한 독립된 공간 (4-8명)"
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 2
}
```

### 예약 섹션 조회

#### GET /external/app/reservation/sections

예약 섹션(실제 예약 관리 단위) 목록을 조회합니다.

**인증**: 불필요

**요청 파라미터**:
- `hostId`: [필수] 호스트 ID (UUID)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 10, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "aa0e8400-e29b-41d4-a716-446655440000",
      "name": "메인 홀 A구역",
      "description": "레스토랑 메인 홀 중앙 구역 (테이블 1-10)"
    },
    {
      "id": "bb0e8400-e29b-41d4-a716-446655440000",
      "name": "메인 홀 B구역",
      "description": "레스토랑 메인 홀 창가 구역 (테이블 11-20)"
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 2
}
```

### 예약 컨텐츠 목록 조회

#### GET /external/app/reservation/contents

예약 컨텐츠 목록을 조회합니다.

**인증**: 불필요

**요청 파라미터**:
- `hostId`: [선택] 호스트 ID (UUID)
- `spaceId`: [선택] 스페이스 ID (UUID)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 10, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "name": "런치 코스 A",
      "description": "전채, 메인, 디저트로 구성된 프리미엄 3코스 런치",
      "images": [
        "https://example.com/lunch-course-a-1.jpg",
        "https://example.com/lunch-course-a-2.jpg"
      ],
      "instructions": "예약 시간 10분 전까지 도착 부탁드립니다",  // nullable
      "contactInfo": {  // nullable
        "phoneNumbers": [
          {
            "type": "MAIN",
            "number": "+8221234567",
            "description": "예약 문의"
          }
        ]
      },
      "restrictionConfig": {  // nullable
        "minMembershipGrade": "AS03"
      },
      "confirmConfig": {
        "confirmType": "IMMEDIATE"  // IMMEDIATE, ADMIN_APPROVAL, LOTTERY
      },
      "openStartAt": "2025-05-01T00:00:00.000Z",  // nullable
      "openEndAt": "2025-05-31T23:59:59.000Z",  // nullable
      "operatingStartAt": "2025-06-01T00:00:00.000Z",  // nullable
      "operatingEndAt": "2025-12-31T23:59:59.000Z",  // nullable
      "host": {
        "id": "770e8400-e29b-41d4-a716-446655440000",
        "name": "SKS 레스토랑 강남점"
      },
      "space": {  // nullable
        "id": "880e8400-e29b-41d4-a716-446655440000",
        "name": "메인 홀"
      }
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 5
}
```

### 예약 컨텐츠 상세 조회

#### GET /external/app/reservation/content/get

예약 컨텐츠를 상세 조회합니다.

**인증**: 불필요

**요청 파라미터**:
- `id`: [필수] 컨텐츠 ID (UUID)

**응답**:
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440000",
  "name": "런치 코스 A",
  "description": "전채, 메인, 디저트로 구성된 프리미엄 3코스 런치",
  "images": [
    "https://example.com/lunch-course-a-1.jpg",
    "https://example.com/lunch-course-a-2.jpg"
  ],
  "instructions": "예약 시간 10분 전까지 도착 부탁드립니다",  // nullable
  "contactInfo": {  // nullable
    "phoneNumbers": [
      {
        "type": "MAIN",
        "number": "+8221234567",
        "description": "예약 문의"
      }
    ]
  },
  "restrictionConfig": {  // nullable
    "minMembershipGrade": "AS03"
  },
  "confirmConfig": {
    "confirmType": "IMMEDIATE"  // IMMEDIATE, ADMIN_APPROVAL, LOTTERY
  },
  "openStartAt": "2025-05-01T00:00:00.000Z",  // nullable
  "openEndAt": "2025-05-31T23:59:59.000Z",  // nullable
  "operatingStartAt": "2025-06-01T00:00:00.000Z",  // nullable
  "operatingEndAt": "2025-12-31T23:59:59.000Z",  // nullable
  "host": {
    "id": "770e8400-e29b-41d4-a716-446655440000",
    "name": "SKS 레스토랑 강남점"
  },
  "space": {  // nullable
    "id": "880e8400-e29b-41d4-a716-446655440000",
    "name": "메인 홀"
  },
  "terms": [
    {
      "id": "cc0e8400-e29b-41d4-a716-446655440000",
      "sn": "TERM001",
      "name": "예약 및 취소 약관",
      "rev": 1,
      "content": "예약 취소는 이용 24시간 전까지 무료로 가능합니다. 이후 취소 시 위약금이 발생할 수 있습니다.",  // nullable
      "link": "https://example.com/terms/reservation",  // nullable
      "isMandatory": true,
      "index": "00001"
    }
  ]
}
```

### 예약 공지사항 조회

#### GET /external/app/reservation/notices

특정 컨텐츠의 공지사항 목록을 조회합니다.

**인증**: 불필요 (publicProcedure)

**요청 파라미터**:
- `reservationContentId`: [필수] 컨텐츠 ID (UUID)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 10, 최대: 500)
- `orderBy`: [선택] 정렬 방식 (기본값: createdAt_desc)

**응답**:
```json
{
  "list": [
    {
      "id": "cc0e8400-e29b-41d4-a716-446655440000",
      "title": "시스템 정기 점검 안내",
      "isActive": true,
      "createdAt": "2025-06-25T09:00:00.000Z",
      "updatedAt": "2025-06-25T09:00:00.000Z"
    },
    {
      "id": "dd0e8400-e29b-41d4-a716-446655440000",
      "title": "예약 변경 안내",
      "isActive": true,
      "createdAt": "2025-06-20T14:00:00.000Z",
      "updatedAt": "2025-06-20T14:00:00.000Z"
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 5
}
```

**참고**:
- 목록 조회 시 `content` 필드는 제외됩니다.
- `isActive`가 true인 공지사항만 조회됩니다.

### 예약 공지사항 상세 조회

#### GET /external/app/reservation/notice/get

공지사항 상세 정보를 조회합니다.

**인증**: 불필요 (publicProcedure)

**요청 파라미터**:
- `id`: [필수] 공지사항 ID (UUID)

**응답**:
```json
{
  "id": "cc0e8400-e29b-41d4-a716-446655440000",
  "title": "시스템 정기 점검 안내",
  "content": "2025년 7월 1일 오전 2시부터 4시까지 시스템 정기 점검이 진행됩니다.\n\n점검 시간 동안 예약 서비스 이용이 제한될 수 있습니다.",
  "isActive": true,
  "createdAt": "2025-06-25T09:00:00.000Z",
  "updatedAt": "2025-06-25T09:00:00.000Z"
}
```

**참고**: 상세 조회 시에만 `content` 필드가 포함됩니다.

### 예약 가격 항목 조회

#### GET /external/app/reservation/price-items

예약 가격 항목 목록을 조회합니다.

**인증**: 불필요 (publicProcedure)

**요청 파라미터**:
- `contentId`: [필수] 컨텐츠 ID (UUID)
- `kind`: [선택] 가격 항목 종류 필터 ('TICKET' | 'MENU' | 'SERVICE')
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 10, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "kind": "MENU",
      "name": "런치 코스 A",
      "description": "전채+메인+디저트",  // nullable
      "basePrice": 35000,
      "priceType": "PER_UNIT",  // FIXED, PER_UNIT
      "minQuantity": 1,
      "maxQuantity": 0,  // 0이면 무제한
      "images": [
        "https://example.com/images/lunch-a.jpg"
      ]
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "kind": "SERVICE",
      "name": "와인 페어링",
      "description": "코스별 와인 3잔",  // nullable
      "basePrice": 25000,
      "priceType": "PER_UNIT",
      "minQuantity": 1,
      "maxQuantity": 0,
      "images": []
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 2
}
```

### 예약 타임슬롯 조회

#### GET /external/app/reservation/time-slots

예약 타임슬롯 목록을 조회합니다.

**인증**: 필수 (memberProtectedProcedure)

**요청 파라미터**:
- `contentId`: [필수] 컨텐츠 ID (UUID)
- `startsAfter`: [선택] 시작일 이후 필터 (ISO 8601)
- `startsBefore`: [선택] 시작일 이전 필터 (ISO 8601)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 500, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "startAt": "2025-06-01T12:00:00.000Z",
      "endAt": "2025-06-01T14:00:00.000Z",
      "totalCapacity": 40,
      "minGroupSize": 2,
      "maxGroupSize": 6,
      "visitIntervalMinutes": 30,  // nullable
      "openConfig": {
        "openType": "GRADED",
        "openStartAtByGrade": {  // optional
          "AS00": "2025-04-01T10:00:00.000Z",
          "AS01": "2025-04-15T10:00:00.000Z",
          "AS02": "2025-05-01T10:00:00.000Z",
          "AS03": "2025-05-10T10:00:00.000Z",
          "AS04": "2025-05-15T10:00:00.000Z",
          "AS05": "2025-05-20T10:00:00.000Z"
        },
        "modificationByDays": 1,  // optional
        "reservationByDays": 7,  // optional
        "modificationByHours": 24  // optional
      },
      "availableCapacity": 32,
      "availableSections": [  // optional
        {
          "name": "메인 홀 A구역",
          "totalCapacity": 40,
          "minGroupSize": 2,
          "maxGroupSize": 20,
          "availableCapacity": 24,
          "totalUnits": 5,
          "availableUnits": 3
        },
        {
          "name": "프라이빗 룸",
          "totalCapacity": 16,
          "minGroupSize": 4,
          "maxGroupSize": 8,
          "availableCapacity": 8,
          "totalUnits": 2,
          "availableUnits": 1
        }
      ],
      "isOpenForReservation": true,
      "openStartAt": "2025-05-10T10:00:00.000Z",
      "openEndAt": "2025-05-31T23:59:59.000Z"
    }
  ],
  "page": 1,
  "pageSize": 500,
  "pageCount": 1,
  "totalCount": 30
}
```

**필드 설명**:
- `availableCapacity`: 예약 가능 인원수
  - SIMPLE_COUNT 전략: totalCapacity - 예약된 인원수
  - FFD_SIMULATION 전략: 사용 가능한 유닛들의 총 수용 인원수
- `availableSections`: 예약 가능한 섹션별 정보 (선택적, 섹션/유닛이 있는 경우만)
  - `name`: 섹션 이름
  - `totalCapacity`: 섹션의 총 수용 가능 인원
  - `minGroupSize`: 해당 섹션에서 예약 가능한 최소 그룹 크기
  - `maxGroupSize`: 해당 섹션에서 예약 가능한 최대 그룹 크기
  - `availableCapacity`: 섹션의 현재 예약 가능 인원
  - `totalUnits`: 전체 유닛 수
  - `availableUnits`: 가용 유닛 수
- `isOpenForReservation`: 회원 등급 기준 현재 예약 가능 여부
- `openStartAt`: 현재 회원 등급 기준 예약 오픈 시간
- `openEndAt`: 예약 마감 시간

### 내 예약 목록 조회

#### POST /external/app/me/reservations

내 예약 목록을 조회합니다.

**인증**: 필요 (memberProtectedProcedure)

**요청 바디**:
```json
{
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",  // [선택] 타임슬롯 ID 필터
  "contentId": "660e8400-e29b-41d4-a716-446655440000",  // [선택] 컨텐츠 ID 필터
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [선택] 호스트 ID 필터
  "statusIn": ["PENDING", "CONFIRMED"],  // [선택] 상태 필터
  "startsAfter": "2025-06-01T00:00:00.000Z",  // [선택] 시작일 이후
  "startsBefore": "2025-06-30T23:59:59.000Z",  // [선택] 시작일 이전
  "isCheckableOnly": false,  // [선택] 체크인 가능 예약만 (기본값: false)
  "page": 1,  // [선택] 페이지 번호 (기본값: 1)
  "pageSize": 10  // [선택] 페이지 크기 (기본값: 10, 최대: 500)
}
```

**응답**:
```json
{
  "list": [
    {
      "id": "990e8400-e29b-41d4-a716-446655440000",
      "sn": "LGR20250615001",
      "status": "CONFIRMED",  // PENDING, CONFIRMED, USED, CANCELLED, NOSHOW
      "groupSize": 4,
      "phoneNumber": "+821012345678",
      "gradeAtIssue": "AS03",  // nullable - 예약 시점의 회원 등급
      "requestNote": "창가 자리 요청",  // nullable
      "additionalInfo": {  // nullable
        "visitTime": "19:30",
        "vehicleNumber": "123-가-1234",
        "needsShowroomTour": false,
        "needsProductConsultation": true
      },
      "createdAt": "2025-05-15T10:00:00.000Z",
      "updatedAt": "2025-05-15T10:00:00.000Z",
      "timeSlot": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "startAt": "2025-06-01T12:00:00.000Z",
        "endAt": "2025-06-01T14:00:00.000Z",
        "content": {
          "id": "660e8400-e29b-41d4-a716-446655440000",
          "name": "런치 코스 A",
          "images": [
            "https://example.com/lunch-a-1.jpg",
            "https://example.com/lunch-a-2.jpg"
          ],
          "confirmConfig": {
            "confirmType": "IMMEDIATE"
          },
          "host": {
            "id": "770e8400-e29b-41d4-a716-446655440000",
            "kind": "RESTAURANT",
            "name": "SKS 레스토랑 강남점"
          },
          "space": {  // nullable
            "id": "880e8400-e29b-41d4-a716-446655440000",
            "name": "메인 홀"
          }
        }
      },
      "section": {  // nullable
        "id": "aa0e8400-e29b-41d4-a716-446655440000",
        "name": "메인 홀 A구역"
      },
      "unit": {  // nullable
        "id": "bb0e8400-e29b-41d4-a716-446655440000",
        "code": "T-05",
        "name": "테이블 5번",
        "minCapacity": 2,
        "maxCapacity": 4
      },
      "couponPoolId": "cc0e8400-e29b-41d4-a716-446655440000",  // nullable
      "hists": [
        {
          "id": 1,  // number, not uuid
          "status": "CONFIRMED",
          "reasonCode": "USER_CREATE_CONFIRMED",
          "createdAt": "2025-05-15T10:00:00.000Z"
        }
      ]
    }
  ],
  "page": 1,
  "pageSize": 10,
  "pageCount": 1,
  "totalCount": 2
}
```

### 내 예약 상세 조회

#### GET /external/app/me/reservation/get

내 예약을 상세 조회합니다.

**인증**: 필요 (memberProtectedProcedure)

**요청 파라미터**:
- `id`: [필수] 예약 ID (UUID)

**응답**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",
  "sn": "LGR20250615001",
  "status": "CONFIRMED",
  "groupSize": 4,
  "phoneNumber": "+821012345678",
  "gradeAtIssue": "AS03",
  "requestNote": "창가 자리 요청",  // nullable
  "additionalInfo": {  // nullable
    "visitTime": "19:30",
    "vehicleNumber": "123-가-1234",
    "needsShowroomTour": false,
    "needsProductConsultation": true
  },
  "createdAt": "2025-05-15T10:00:00.000Z",
  "updatedAt": "2025-05-15T10:00:00.000Z",
  "timeSlot": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "startAt": "2025-06-01T12:00:00.000Z",
    "endAt": "2025-06-01T14:00:00.000Z",
    "openConfig": {
      "openType": "GRADED",
      "modificationByDays": 1
    },
    "content": {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "name": "런치 코스 A",
      "images": [
        "https://example.com/lunch-a-1.jpg",
        "https://example.com/lunch-a-2.jpg"
      ],
      "instructions": "예약 시간 10분 전까지 도착 부탁드립니다",  // nullable
      "contactInfo": {  // nullable
        "phoneNumbers": [
          {
            "type": "MAIN",
            "number": "+8221234567",
            "description": "예약 문의"
          }
        ]
      },
      "confirmConfig": {
        "confirmType": "IMMEDIATE"
      },
      "host": {
        "id": "770e8400-e29b-41d4-a716-446655440000",
        "kind": "RESTAURANT",
        "name": "SKS 레스토랑 강남점",
        "address": {
          "zipCode": "06159",
          "mainAddress": "서울시 강남구 테헤란로 123",
          "detailAddress": "SKS빌딩 1층"
        },
        "phoneNumber": "02-1234-5678"  // nullable
      },
      "space": {  // nullable
        "id": "880e8400-e29b-41d4-a716-446655440000",
        "name": "메인 홀"
      }
    }
  },
  "section": {  // nullable
    "id": "aa0e8400-e29b-41d4-a716-446655440000",
    "name": "메인 홀 A구역"
  },
  "unit": {  // nullable
    "id": "bb0e8400-e29b-41d4-a716-446655440000",
    "code": "T-05",
    "name": "테이블 5번",
    "minCapacity": 2,
    "maxCapacity": 4
  },
  "couponPoolId": "cc0e8400-e29b-41d4-a716-446655440000",  // nullable
  "hists": [
    {
      "id": 1,  // number, not uuid
      "status": "CONFIRMED",
      "reasonCode": "USER_CREATE_CONFIRMED",
      "changes": {},  // nullable
      "note": "예약 확정",  // nullable
      "createdAt": "2025-05-15T10:00:00.000Z"
    }
  ],
  "canModify": true
}
```

### 예약 생성

#### POST /external/app/reservation/create

예약을 생성합니다.

**인증**: 필요 (memberProtectedProcedure)

<Note>
**GRADED 오픈 타입 동작 방식:**
- 회원 등급에 따라 예약 오픈 시간이 다르게 적용됩니다
- 예약 생성 시 자동으로 회원 등급을 조회하여 해당 등급의 오픈 시간을 적용합니다
</Note>

**요청 바디**:
```json
{
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",  // [필수] 타임슬롯 ID
  "groupSize": 2,  // [필수] 예약 인원
  "phoneNumber": "+821012345678",  // [필수] 연락처
  "requestNote": "창가 자리 요청",  // [선택] 요청사항 (최대 500자)
  "additionalInfo": {  // [선택] 추가 정보
    "visitTime": "19:30",
    "vehicleNumber": "123-가-1234",
    "needsShowroomTour": true,
    "needsProductConsultation": false
  },
  "sectionId": "aa0e8400-e29b-41d4-a716-446655440000",  // [선택] 섹션 ID (구역 예약시)
  "unitId": "bb0e8400-e29b-41d4-a716-446655440000",  // [선택] 유닛 ID (지정석 예약시)
  "termsAgreements": [  // [필수] 약관 동의
    {
      "termsId": "cc0e8400-e29b-41d4-a716-446655440000",
      "isAgreed": true
    }
  ]
}
```

**응답**:
```json
{
  "id": "dd0e8400-e29b-41d4-a716-446655440000",
  "sn": "LGR20250615002"
}
```

**발생 가능한 에러**:

| 에러 코드 | 에러 메시지 | 발생 조건 |
|----------|------------|----------|
| `401` | UNAUTHORIZED | JWT 토큰 없음 또는 만료 |
| `FDE-C-002` | NOT_FOUND | 회원을 찾을 수 없음 (NewBest API에서 memberCi로 조회 실패) |
| `FDE-A-002` | `[유효한 타임슬롯을 찾을 수 없습니다]` | 잘못된 타임슬롯 ID 또는 비활성화된 타임슬롯 |
| `FDE-A-002` | `[현재 예약 가능한 시간이 아닙니다]` | 예약 오픈 시간 범위를 벗어남 (BATCH/SEQUENTIAL/GRADED 타입별 기준) |
| `FDE-A-002` | `[{쿠폰명} 이용 횟수 초과 (X/Y회)]` | 연간 멤버십 쿠폰 사용 횟수 초과 |
| `FDE-A-002` | `[필수 약관에 모두 동의해야 합니다]` | 필수 약관 미동의 |
| `FDE-A-002` | `[이 컨텐츠는 {등급} 등급 이상의 회원만 예약할 수 있습니다]` | 최소 회원 등급 미달 (restrictionConfig.minMembershipGrade) |
| `FDE-A-002` | `[그룹 인원은 {최소}명에서 {최대}명까지 가능합니다]` | minGroupSize ~ maxGroupSize 범위 초과 |
| `FDE-A-002` | `[예약이 불가능합니다]` | FFD 시뮬레이션 결과 섹션/유닛 배치 불가능 |
| `FDE-A-002` | `[수용 인원을 초과합니다]` | 타임슬롯 총 정원 초과 |
| `FDE-C-003` | CONFLICT | Unique constraint 위반 (중복 데이터) |
| `FDE-C-004` | CONFLICT | Foreign key constraint 위반 (잘못된 참조) |
| `FDE-C-101` | INTERNAL_SERVER_ERROR | 데이터베이스 내부 에러 |
| `FDE-C-901,1` | INTERNAL_SERVER_ERROR | NewBest API 연결 실패 |
| `FDE-C-901,2` | `[{resultCode}: {resultMsg}]` | NewBest API 응답 에러 |

### 예약 수정

#### POST /external/app/reservation/update

예약을 수정합니다.

**인증**: 필요 (memberProtectedProcedure)

<Note>
**GRADED 오픈 타입 동작 방식:**
- 타임슬롯 변경 시 회원 등급에 따른 오픈 시간이 적용됩니다
- 예약 수정 시 자동으로 회원 등급을 조회하여 해당 등급의 오픈 시간을 적용합니다
</Note>

<Warning>
**변경 불가능한 항목:**
- 섹션 ID (sectionId) - 한 번 배정된 섹션은 변경 불가
- 유닛 ID (unitId) - 한 번 배정된 유닛은 변경 불가
- 그룹 크기 (groupSize) - 유닛 배정 전에는 변경 불가
  - 유닛 배정 전 에러: "유닛 배정 전에는 인원 변경이 불가능합니다. 예약을 취소 후 다시 생성해 주세요."
  - 유닛 배정 후: FFD 알고리즘이 실시간으로 가능 범위 체크
</Warning>

**요청 바디**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",  // [필수] 예약 ID
  "timeSlotId": "cc0e8400-e29b-41d4-a716-446655440000",  // [선택] 새 타임슬롯 ID
  "groupSize": 3,  // [선택] 새 예약 인원
  "phoneNumber": "+821087654321",  // [선택] 새 연락처
  "requestNote": "인원 변경 요청",  // [선택] 요청사항
  "additionalInfo": {  // [선택] 추가 정보
    "visitTime": "20:00",
    "vehicleNumber": "234-나-5678",
    "needsShowroomTour": true,
    "needsProductConsultation": false
  },
  "note": "일행 1명이 추가로 참석합니다"  // [선택] 수정 사유 노트 (최대 500자)
}
```

**응답**: 없음 (200 OK)

**발생 가능한 에러**:

| 에러 코드 | 에러 메시지 | 발생 조건 |
|----------|------------|----------|
| `401` | UNAUTHORIZED | JWT 토큰 없음 또는 만료 |
| `FDE-C-002` | NOT_FOUND | 예약을 찾을 수 없음 (예약 ID 또는 회원 ID 불일치) |
| `FDE-A-002` | FORBIDDEN | 수정 불가능한 예약 (이미 취소됨, 이용완료, 노쇼 처리됨) |
| `FDE-A-002` | FORBIDDEN | 수정 마감 시간 경과 (BATCH/SEQUENTIAL: modificationByHours, GRADED: modificationByDays) |
| `BAD_REQUEST` | `유닛 배정 전에는 인원 변경이 불가능합니다. 예약을 취소 후 다시 생성해 주세요.` | 유닛 미배정 상태에서 groupSize 변경 시도 |
| `FDE-A-002` | `[예약 가능 시간이 지났습니다]` | 타임슬롯 종료 시간 경과 (어드민용) |
| `FDE-A-002` | `[현재 예약 가능한 시간이 아닙니다]` | 타임슬롯 변경 시 예약 오픈 시간 검증 실패 |
| `FDE-A-002` | `[그룹 인원은 {최소}명에서 {최대}명까지 가능합니다]` | 인원 변경 시 범위 초과 |
| `FDE-A-002` | `[예약이 불가능합니다]` | 타임슬롯/인원 변경 시 수용 불가 |
| `FDE-C-003` | CONFLICT | Unique constraint 위반 |
| `FDE-C-004` | CONFLICT | Foreign key constraint 위반 |
| `FDE-C-101` | INTERNAL_SERVER_ERROR | 데이터베이스 내부 에러 |
| `FDE-C-901,1` | INTERNAL_SERVER_ERROR | NewBest API 연결 실패 |
| `FDE-C-901,2` | `[{resultCode}: {resultMsg}]` | NewBest API 응답 에러 |

<Note>
**수정 가능 여부 판단 기준**:
- `PENDING`, `CONFIRMED` 상태만 수정 가능
- `CANCELLED`, `USED`, `NOSHOW` 상태는 수정 불가
- 수정 마감 시간:
  - BATCH/SEQUENTIAL: 시작 시간 - `modificationByHours`시간 전
  - GRADED: 시작일 D-`modificationByDays`일 23:59:59
  - 기본값: 시작 시간 24시간 전
</Note>

### 예약 취소

#### POST /external/app/reservation/cancel

예약을 취소합니다.

**인증**: 필요 (memberProtectedProcedure)

**요청 바디**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",  // [필수] 예약 ID
  "note": "일정 변경으로 인한 취소"  // [선택] 취소 사유 (최대 500자)
}
```

**응답**: 없음 (200 OK)

### 예약 체크인

#### POST /external/app/reservation/checkin

예약을 체크인합니다 (QR 코드 스캔).

**인증**: 필요 (memberProtectedProcedure)

**요청 바디**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",  // [필수] 예약 ID
  "note": "정시 도착"  // [선택] 체크인 메모 (최대 500자)
}
```

**응답**: 없음 (200 OK)

**체크인 가능 조건**:
- 예약 상태가 CONFIRMED여야 함
- 현재 시간이 타임슬롯 시작 시간 30분 전부터 종료 시간 이내여야 함
- 본인의 예약이어야 함

### 예약 빈자리 알림 대기 현황 조회

#### GET /external/app/reservation/vacancy-waitlist-status

예약 빈자리 알림 대기 현황을 조회합니다.

**인증**: 불필요

**요청 파라미터**:
- `timeSlotId`: [필수] 타임슬롯 ID (UUID)

**응답**:
```json
{
  "totalWaitlistCount": 3,  // 현재 대기 중인 인원 수
  "canJoinWaitlist": true    // 추가 신청 가능 여부 (최대 10명)
}
```

### 예약 빈자리 알림 대기 신청/취소

#### POST /external/app/reservation/vacancy-waitlist-toggle

예약 빈자리 알림 대기를 신청/취소합니다.

**인증**: 필요 (memberProtectedProcedure)

**요청 바디**:
```json
{
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000"
}
```

**응답**:
```json
{
  "isWaitlisted": true  // 대기 신청 상태 (true: 신청됨, false: 취소됨)
}
```

**제약사항**:
- 타임슬롯이 매진 상태여야 신청 가능
- 타임슬롯당 최대 10명까지만 대기 가능
- 빈자리 발생 시 선착순으로 알림 발송 후 대기에서 자동 제거

### 예약 오픈 알림 대기 신청/취소

#### POST /external/app/reservation/open-waitlist-toggle

예약 오픈 알림 대기를 신청/취소합니다.

**인증**: 필요 (memberProtectedProcedure)

**요청 바디**:
```json
{
  "contentId": "660e8400-e29b-41d4-a716-446655440000"
}
```

**응답**:
```json
{
  "isWaitlisted": true  // 대기 신청 상태 (true: 신청됨, false: 취소됨)
}
```

**알림 시점**:
- 매월 1일 오전 10시 크론잡 실행
- 일반 등급: 다음달 1일 ~ 다다음달 말일 예약 가능 안내
- 블랙(AS00) 등급: 다음달 1일 ~ 다다다음달 말일 예약 가능 안내

### 내 예약 알림 대기 목록 조회

#### GET /external/app/me/reservation/waitlists

내 예약 알림 대기 목록을 조회합니다.

**인증**: 필요 (memberProtectedProcedure)

**응답**:
```json
{
  "vacancyWaitlist": [
    {
      "id": "330e8400-e29b-41d4-a716-446655440000",
      "contentId": "660e8400-e29b-41d4-a716-446655440000",
      "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",
      "createdAt": "2025-01-15T09:30:00.000Z"
    }
  ],
  "openWaitlist": [
    {
      "id": "440e8400-e29b-41d4-a716-446655440000",
      "contentId": "660e8400-e29b-41d4-a716-446655440000",
      "createdAt": "2025-01-10T14:20:00.000Z"
    }
  ]
}
```

## Admin API (관리자용)

### 예약 호스트 관리

#### POST /external/admin/reservation/hosts

예약 호스트 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "kind": "RESTAURANT",  // [선택] RESTAURANT, ART_CENTER
  "operatingStatusIn": ["UPCOMING", "ONGOING", "COMPLETED"],  // [선택]
  "displayStatusIn": ["UPCOMING", "ONGOING", "COMPLETED"],  // [선택]
  "isActive": true,  // [선택] 기본값: true
  "orderBy": "createdAt_desc",  // [선택] 기본값: createdAt_desc
  "page": 1,  // [선택] 기본값: 1
  "pageSize": 20  // [선택] 기본값: 20, 최대: 500
}
```

**응답**:
```json
{
  "list": [
    {
      "id": "770e8400-e29b-41d4-a716-446655440000",
      "kind": "RESTAURANT",
      "name": "SKS 레스토랑 강남점",
      "address": {
        "zipCode": "06159",
        "mainAddress": "서울시 강남구 테헤란로 123",
        "detailAddress": "SKS빌딩 1층"
      },
      "phoneNumber": "02-1234-5678",  // nullable
      "operatingStartAt": "2025-01-01T00:00:00.000Z",  // nullable
      "operatingEndAt": "2025-12-31T23:59:59.000Z",  // nullable
      "operatingHours": [  // JSON 배열
        {
          "days": ["MON", "TUE", "WED", "THU", "FRI"],
          "hours": [
            {"openTime": "11:30", "closeTime": "14:30"},
            {"openTime": "17:30", "closeTime": "22:00"}
          ]
        }
      ],
      "holidays": {  // nullable
        "regular": {
          "weekly": ["SUN"],
          "monthly": [],
          "yearly": [
            {"month": 1, "day": 1},
            {"month": 12, "day": 25}
          ]
        },
        "specific": ["2025-02-08", "2025-02-09"]
      },
      "description": "프리미엄 다이닝 레스토랑",
      "images": [
        "https://example.com/restaurant/gangnam-1.jpg",
        "https://example.com/restaurant/gangnam-2.jpg"
      ],
      "instructions": "예약 시간 10분 전까지 도착 부탁드립니다",  // nullable
      "displayStartAt": "2025-01-01T00:00:00.000Z",  // nullable
      "displayEndAt": "2025-12-31T23:59:59.000Z",  // nullable
      "isActive": true,
      "createdAt": "2024-12-01T00:00:00.000Z",
      "updatedAt": "2025-01-15T10:00:00.000Z",
      "spaces": [
        {
          "id": "880e8400-e29b-41d4-a716-446655440000",
          "name": "메인 홀"
        },
        {
          "id": "990e8400-e29b-41d4-a716-446655440000",
          "name": "프라이빗 룸"
        }
      ]
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 3
}
```

#### POST /external/admin/reservation/host/create

예약 호스트를 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "kind": "RESTAURANT",  // [필수] RESTAURANT, ART_CENTER
  "name": "SKS 레스토랑 판교점",  // [필수] 최대 35자
  "address": {  // [필수]
    "zipCode": "06159",  // [필수]
    "mainAddress": "서울시 서초구 판교대로 100",  // [필수]
    "detailAddress": "SKS빌딩 2층"  // [선택]
  },
  "phoneNumber": "02-2005-0114",  // [선택]
  "operatingStartAt": "2025-01-01T00:00:00.000Z",  // [선택]
  "operatingEndAt": "2025-12-31T23:59:59.000Z",  // [선택]
  "operatingHours": [  // [필수] 최소 1개
    {
      "days": ["MON", "TUE", "WED", "THU", "FRI"],
      "hours": [{"openTime": "11:30", "closeTime": "22:00"}]
    }
  ],
  "holidays": {  // [필수]
    "regular": {
      "weekly": ["SUN"],  // 매주 일요일 휴일
      "monthly": [],  // 매월 특정 주차의 특정 요일 (예: 둘째 월요일)
      "yearly": [  // 매년 특정 날짜
        {"month": 1, "day": 1},
        {"month": 12, "day": 25}
      ]
    },
    "specific": ["2025-02-08", "2025-02-09"]  // 특정 날짜
  },
  "description": "프리미엄 레스토랑",  // [필수] 최대 500자
  "images": ["https://example.com/rest1.jpg", "https://example.com/rest2.jpg"],  // [필수] 최소 1개
  "instructions": "예약 3일 전 취소 가능",  // [선택] 최대 2000자
  "displayStartAt": "2025-01-01T00:00:00.000Z",  // [선택]
  "displayEndAt": "2025-12-31T23:59:59.000Z",  // [선택]
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/host/update

예약 호스트를 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000",  // [필수]
  "kind": "RESTAURANT",  // [선택]
  "name": "LG 아트센터 서울",  // [선택] 최대 35자
  "address": {  // [선택]
    "zipCode": "06159",
    "mainAddress": "서울시 강남구 강남대로 100",
    "detailAddress": "LG빌딩 1층"
  },
  "phoneNumber": "02-2005-0115",  // [선택]
  "operatingStartAt": "2025-01-01T00:00:00.000Z",  // [선택]
  "operatingEndAt": "2025-12-31T23:59:59.000Z",  // [선택]
  "operatingHours": [  // [선택]
    {
      "days": ["MON", "TUE", "WED", "THU", "FRI", "SAT"],
      "hours": [{"openTime": "10:00", "closeTime": "20:00"}]
    }
  ],
  "holidays": {  // [선택]
    "regular": {
      "weekly": ["SUN"],
      "monthly": [],
      "yearly": [
        {"month": 1, "day": 1},
        {"month": 12, "day": 25}
      ]
    },
    "specific": ["2025-02-09", "2025-02-10"]
  },
  "description": "업데이트된 설명",  // [선택] 최대 500자
  "images": ["https://example.com/img1.jpg", "https://example.com/img2.jpg"],  // [선택]
  "instructions": "업데이트된 이용 안내",  // [선택] 최대 2000자
  "displayStartAt": "2025-01-01T00:00:00.000Z",  // [선택]
  "displayEndAt": "2025-12-31T23:59:59.000Z",  // [선택]
  "isActive": true  // [선택]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/host/delete

예약 호스트를 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 스페이스 관리

#### GET /external/admin/reservation/spaces

예약 스페이스 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `hostId`: [선택] 호스트 ID 필터 (UUID)
- `isActive`: [선택] 활성 상태 필터 (기본값: true)
- `orderBy`: [선택] 정렬 기준 (기본값: createdAt_desc)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 20, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "880e8400-e29b-41d4-a716-446655440000",
      "name": "메인 홀",
      "description": "최대 100명 수용 가능한 메인 다이닝 공간",
      "isActive": true,
      "createdAt": "2024-12-01T00:00:00.000Z",
      "updatedAt": "2025-01-15T10:00:00.000Z",
      "host": {
        "id": "770e8400-e29b-41d4-a716-446655440000",
        "name": "SKS 레스토랑 강남점"
      }
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 2
}
```

#### POST /external/admin/reservation/space/create

예약 스페이스를 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [필수]
  "name": "프라이빗 룸",  // [필수] 최대 35자
  "description": "소규모 모임을 위한 독립된 공간 (4-8명)",  // [필수] 최대 500자
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/space/update

예약 스페이스를 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "880e8400-e29b-41d4-a716-446655440000",  // [필수]
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [선택]
  "name": "소극장 A",  // [선택] 최대 35자
  "description": "업데이트된 설명",  // [선택] 최대 500자
  "isActive": true  // [선택]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/space/delete

예약 스페이스를 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "880e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 섹션 관리

#### GET /external/admin/reservation/sections

예약 섹션(실제 예약 관리 단위) 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `hostId`: [선택] 호스트 ID (UUID)
- `isActive`: [선택] 활성 상태 (기본값: true)
- `orderBy`: [선택] 정렬 방식 (기본값: createdAt_desc)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 20, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "aa0e8400-e29b-41d4-a716-446655440000",
      "name": "메인 홀",
      "description": "레스토랑 메인 홀 섹션",
      "isActive": true,
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z",
      "host": {
        "id": "770e8400-e29b-41d4-a716-446655440000",
        "name": "SKS 레스토랑 강남점"
      },
      "units": [
        {
          "id": "bb0e8400-e29b-41d4-a716-446655440000",
          "code": "T01",
          "name": "테이블 1",
          "minCapacity": 2,
          "maxCapacity": 4
        }
      ]
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 3
}
```

#### POST /external/admin/reservation/section/create

예약 섹션을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [필수]
  "name": "메인 홀",  // [필수] 최대 35자
  "description": "레스토랑 메인 홀",  // [필수] 최대 500자
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/section/update

예약 섹션을 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "aa0e8400-e29b-41d4-a716-446655440000",  // [필수]
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [선택]
  "name": "프라이빗 룸",  // [선택] 최대 35자
  "description": "업데이트된 설명",  // [선택] 최대 500자
  "isActive": false  // [선택]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/section/delete

예약 섹션을 삭제합니다. 섹션에 유닛이 있으면 삭제가 불가능합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "aa0e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 유닛 관리

#### GET /external/admin/reservation/units

예약 유닛 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `sectionId`: [선택] 섹션 ID (UUID)
- `timeSlotId`: [선택] 타임슬롯 ID (UUID) - 특정 시간대의 가용성 확인
- `isActive`: [선택] 활성 상태 (기본값: true)
- `orderBy`: [선택] 정렬 방식 (기본값: index_asc)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 20, 최대: 500)
- `shouldMask`: [선택] 마스킹 여부 (기본값: true)

**응답**:
```json
{
  "list": [
    {
      "id": "unit-uuid",
      "code": "TABLE-01",
      "name": "테이블 1",
      "description": "메인 홀 테이블 1",
      "minCapacity": 1,
      "maxCapacity": 4,
      "metadata": null,
      "index": "a0000001",
      "isActive": true,
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z",
      "section": {
        "id": "section-uuid",
        "name": "메인 홀"
      },
      "isAvailable": true,  // [선택] timeSlotId가 제공된 경우에만
      "reservation": null  // [선택] timeSlotId가 제공된 경우에만, 예약 정보
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 5
}
```

#### POST /external/admin/reservation/unit/create

예약 유닛을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "sectionId": "aa0e8400-e29b-41d4-a716-446655440000",  // [필수]
  "code": "TABLE-02",  // [필수] 최대 20자
  "name": "테이블 2",  // [필수] 최대 35자
  "description": "메인 홀 테이블 2",  // [필수] 최대 500자
  "minCapacity": 1,  // [선택] 기본값: 0, 최소: 0
  "maxCapacity": 4,  // [선택] 기본값: 0, 최소: 0
  "metadata": { "floor": 1 },  // [선택]
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/unit/update

예약 유닛을 수정합니다. Unit은 Section 간 이동이 불가능합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "bb0e8400-e29b-41d4-a716-446655440000",  // [필수]
  "code": "TABLE-03",  // [선택] 최대 20자
  "name": "테이블 3",  // [선택] 최대 35자
  "description": "업데이트된 설명",  // [선택] 최대 500자
  "minCapacity": 2,  // [선택]
  "maxCapacity": 6,  // [선택]
  "metadata": { "floor": 2 },  // [선택]
  "isActive": false,  // [선택]
  "idForBefore": "cc0e8400-e29b-41d4-a716-446655440000"  // [선택] 순서 변경용, null이면 마지막
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/unit/delete

예약 유닛을 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "bb0e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/unit/assign

예약에 유닛을 배정하거나 변경합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "reservationId": "990e8400-e29b-41d4-a716-446655440000",  // [필수] 예약 ID
  "unitId": "bb0e8400-e29b-41d4-a716-446655440000",  // [필수] 배정할 유닛 ID
  "note": "VIP 고객 요청으로 유닛 변경",  // [선택] 최대 500자
  "isForced": true  // [선택] 강제 할당 여부 (용량 제한 무시)
}
```

**제한 조건**:
- 예약 상태가 `CONFIRMED`인 경우만 가능
- 타임슬롯 시작 시간 이전까지만 가능
- 같은 섹션 내의 유닛으로만 배정/변경 가능
- 유닛의 capacity가 예약 인원(groupSize)과 일치해야 함 (`isForced: true` 시 제한 무시)
- 해당 타임슬롯에 유닛이 사용 가능해야 함

**강제 할당 (isForced)**:
- 어드민은 `isForced: true` 옵션으로 유닛 용량 제한을 무시하고 배정 가능
- 예: 4인 테이블에 6명 그룹 강제 배정
- 강제 할당 시 이력(reservationHist)에 기록됨
- 다른 검증 조건(상태, 시간, 섹션, 가용성)은 여전히 적용

**응답**: 없음 (200 OK)

**에러 코드**:
- `FDE-C-002`: 예약을 찾을 수 없음
- `FDE-A-002`: 검증 실패 (상태, 시간, 섹션, capacity, 가용성 등)

#### POST /external/admin/reservation/unit/unassign

예약의 유닛 배정을 취소합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "reservationId": "990e8400-e29b-41d4-a716-446655440000",  // [필수] 예약 ID
  "note": "고객 요청으로 유닛 배정 취소"  // [선택] 최대 500자
}
```

**제한 조건**:
- 예약 상태가 `CONFIRMED`인 경우만 가능
- 유닛이 배정되어 있어야 함
- 타임슬롯 시작 시간 이전까지만 가능

**응답**: 없음 (200 OK)

**에러 코드**:
- `FDE-C-002`: 예약을 찾을 수 없음
- `FDE-A-002`: 검증 실패 (상태, 유닛 미배정, 시간 초과 등)

### 예약 컨텐츠 관리

#### POST /external/admin/reservation/contents

예약 컨텐츠 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [선택] 호스트 ID 필터
  "spaceId": "880e8400-e29b-41d4-a716-446655440000",  // [선택] 스페이스 ID 필터
  "operatingStatusIn": ["UPCOMING", "ONGOING", "COMPLETED"],  // [선택]
  "displayStatusIn": ["UPCOMING", "ONGOING", "COMPLETED"],  // [선택]
  "isActive": true,  // [선택] 기본값: true
  "orderBy": "createdAt_desc",  // [선택] 기본값: createdAt_desc
  "page": 1,  // [선택] 기본값: 1
  "pageSize": 20  // [선택] 기본값: 20, 최대: 500
}
```

**응답**:
```json
{
  "list": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "name": "런치 코스",
      "description": "프리미엄 3코스 런치",
      "images": ["https://example.com/lunch1.jpg"],
      "instructions": "예약 3일 전까지 취소 가능",  // nullable
      "contactInfo": {  // nullable
        "type": "PHONE",
        "value": "02-1234-5678"
      },
      "restrictionConfig": {  // nullable
        "minMembershipGrade": "AS03"
      },
      "confirmConfig": {
        "confirmType": "LOTTERY",
        "lotteryDate": "2025-05-20",
        "lotteryCapacity": 100
      },
      "displayStartAt": "2025-04-01T00:00:00.000Z",  // nullable
      "displayEndAt": "2025-05-30T23:59:59.000Z",  // nullable
      "openStartAt": "2025-05-01T00:00:00.000Z",  // nullable
      "openEndAt": "2025-05-25T23:59:59.000Z",  // nullable
      "operatingStartAt": "2025-06-01T00:00:00.000Z",  // nullable
      "operatingEndAt": "2025-06-30T23:59:59.000Z",  // nullable
      "isActive": true,
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z",
      "host": {
        "id": "770e8400-e29b-41d4-a716-446655440000",
        "name": "SKS 레스토랑 강남점"
      },
      "space": {  // nullable
        "id": "880e8400-e29b-41d4-a716-446655440000",
        "name": "메인 홀"
      }
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 5
}
```

#### GET /external/admin/reservation/content/get

예약 컨텐츠를 상세 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `id`: [필수] 컨텐츠 ID (UUID)

**응답**:
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440000",
  "name": "뮤지컬 '마틸다'",
  "description": "토니상 수상작",
  "images": ["https://example.com/matilda1.jpg", "https://example.com/matilda2.jpg"],
  "instructions": "예약 및 이용 안내",  // nullable
  "contactInfo": {  // nullable
    "phoneNumbers": [
      {
        "type": "MAIN",
        "number": "+8225441234",
        "description": "문의"
      }
    ]
  },
  "restrictionConfig": {  // nullable
    "minMembershipGrade": "AS03"
  },
  "confirmConfig": {
    "confirmType": "LOTTERY",
    "lotteryDate": "2025-05-20",
    "lotteryCapacity": 200
  },
  "displayStartAt": "2025-04-01T00:00:00.000Z",  // nullable
  "displayEndAt": "2025-05-30T23:59:59.000Z",  // nullable
  "openStartAt": "2025-05-01T00:00:00.000Z",  // nullable
  "openEndAt": "2025-05-25T23:59:59.000Z",  // nullable
  "operatingStartAt": "2025-06-01T00:00:00.000Z",  // nullable
  "operatingEndAt": "2025-06-30T23:59:59.000Z",  // nullable
  "isActive": true,
  "createdAt": "2025-01-01T00:00:00.000Z",
  "updatedAt": "2025-01-01T00:00:00.000Z",
  "host": {
    "id": "770e8400-e29b-41d4-a716-446655440000",
    "name": "LG 아트센터"
  },
  "space": {  // nullable
    "id": "880e8400-e29b-41d4-a716-446655440000",
    "name": "메인홀"
  },
  "terms": []
}
```

#### POST /external/admin/reservation/content/create

예약 컨텐츠를 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "name": "디너 코스",  // [필수] 최대 35자
  "description": "프리미엄 5코스 디너",  // [필수]
  "images": ["https://example.com/dinner1.jpg", "https://example.com/dinner2.jpg"],  // [필수] 최소 1개
  "instructions": "예약 및 이용 안내",  // [선택] 최대 2000자
  "contactInfo": {  // [선택]
    "type": "PHONE",
    "value": "02-3456-7890"
  },
  "restrictionConfig": {  // [선택]
    "minMembershipGrade": "AS03"
  },
  "confirmConfig": {  // [필수]
    "confirmType": "LOTTERY",
    "lotteryDate": "2025-05-20",  // LOTTERY인 경우 필수
    "lotteryCapacity": 50  // LOTTERY인 경우 필수
  },
  "displayStartAt": "2025-04-01T00:00:00.000Z",  // [선택]
  "displayEndAt": "2025-05-30T23:59:59.000Z",  // [선택]
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [필수]
  "spaceId": "880e8400-e29b-41d4-a716-446655440000",  // [선택]
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/content/update

예약 컨텐츠를 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440000",  // [필수]
  "name": "런치 코스 (수정)",  // [선택]
  "description": "업데이트된 메뉴 설명",  // [선택]
  "images": ["https://example.com/lunch-update.jpg"],  // [선택]
  "instructions": "업데이트된 이용 안내",  // [선택]
  "contactInfo": {  // [선택]
    "type": "EMAIL",
    "value": "reservation@example.com"
  },
  "restrictionConfig": {  // [선택]
    "minMembershipGrade": "AS04"
  },
  "confirmConfig": {  // [선택]
    "confirmType": "ADMIN_APPROVAL"
  },
  "displayStartAt": "2025-04-01T00:00:00.000Z",  // [선택]
  "displayEndAt": "2025-05-30T23:59:59.000Z",  // [선택]
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [선택]
  "spaceId": "880e8400-e29b-41d4-a716-446655440000",  // [선택]
  "isActive": false  // [선택]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/content/delete

예약 컨텐츠를 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 공지사항 관리

#### GET /external/admin/reservation/notices

예약 공지사항 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `reservationContentId`: [선택] 컨텐츠 ID (UUID)
- `isActive`: [선택] 활성 상태 (boolean)
- `orderBy`: [선택] 정렬 순서 (기본값: createdAt_desc)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 20, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "cc0e8400-e29b-41d4-a716-446655440000",
      "title": "시스템 정기 점검 안내",
      "isActive": true,
      "createdAt": "2025-06-25T09:00:00.000Z",
      "updatedAt": "2025-06-25T09:00:00.000Z"
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 10
}
```

#### GET /external/admin/reservation/notice/get

예약 공지사항 상세 정보를 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `id`: [필수] 공지사항 ID (UUID)

**응답**:
```json
{
  "id": "cc0e8400-e29b-41d4-a716-446655440000",
  "title": "시스템 정기 점검 안내",
  "content": "2025년 7월 1일 오전 2시부터 4시까지 시스템 정기 점검이 진행됩니다.",
  "isActive": true,
  "createdAt": "2025-06-25T09:00:00.000Z",
  "updatedAt": "2025-06-25T09:00:00.000Z"
}
```

#### POST /external/admin/reservation/notice/create

예약 컨텐츠에 대한 공지사항을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "reservationContentId": "660e8400-e29b-41d4-a716-446655440000",  // [필수]
  "title": "시스템 정기 점검 안내",  // [필수] 최대 255자
  "content": "2025년 7월 1일 오전 2시부터 4시까지 시스템 정기 점검이 진행됩니다."  // [필수]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/notice/update

예약 공지사항을 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "cc0e8400-e29b-41d4-a716-446655440000",  // [필수]
  "reservationContentId": "660e8400-e29b-41d4-a716-446655440000",  // [선택]
  "title": "시스템 정기 점검 안내 (수정)",  // [선택] 최대 255자
  "content": "점검 시간이 변경되었습니다.",  // [선택]
  "isActive": true  // [선택]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/notice/delete

예약 공지사항을 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "cc0e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 가격 항목 관리

#### GET /external/admin/reservation/price-items

예약 가격 항목 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `contentId`: [선택] 컨텐츠 ID (UUID)
- `kind`: [선택] 가격 항목 종류 (TICKET, MENU, SERVICE)
- `isActive`: [선택] 활성 상태 (기본값: true)
- `orderBy`: [선택] 정렬 순서 (기본값: index_asc)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 20, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "kind": "MENU",
      "name": "런치 코스 A",
      "description": "전채+메인+디저트",  // nullable
      "basePrice": 35000,
      "priceType": "PER_UNIT",
      "minQuantity": 1,
      "maxQuantity": 0,  // 0이면 무제한
      "images": [
        "https://example.com/images/lunch-a.jpg"
      ],
      "index": "00001",
      "isActive": true,
      "createdAt": "2025-01-15T10:30:00.000Z",
      "updatedAt": "2025-01-15T10:30:00.000Z",
      "content": {
        "id": "660e8400-e29b-41d4-a716-446655440000",
        "name": "LG 시그니처 레스토랑"
      }
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 3
}
```

#### POST /external/admin/reservation/price-item/create

예약 가격 항목을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "contentId": "660e8400-e29b-41d4-a716-446655440000",  // [필수]
  "kind": "MENU",  // [필수] TICKET, MENU, SERVICE
  "name": "디너 코스 A",  // [필수] 최대 35자
  "description": "프리미엄 5코스 디너",  // [선택] 최대 500자
  "basePrice": 85000,  // [필수] 0 이상
  "priceType": "PER_UNIT",  // [필수] FIXED, PER_UNIT
  "minQuantity": 1,  // [선택] 기본값: 1
  "maxQuantity": 0,  // [선택] 기본값: 0 (무제한)
  "images": [  // [선택] 기본값: []
    "https://example.com/images/dinner-a.jpg"
  ],
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/price-item/update

예약 가격 항목을 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000",  // [필수]
  "kind": "MENU",  // [선택]
  "name": "디너 코스 A (수정)",  // [선택] 최대 35자
  "description": "프리미엄 7코스 디너",  // [선택] 최대 500자
  "basePrice": 95000,  // [선택] 0 이상
  "priceType": "PER_UNIT",  // [선택]
  "minQuantity": 1,  // [선택]
  "maxQuantity": 4,  // [선택] 0이면 무제한
  "images": [  // [선택]
    "https://example.com/images/dinner-a-new.jpg"
  ],
  "isActive": true,  // [선택]
  "idForBefore": "550e8400-e29b-41d4-a716-446655440000"  // [선택] 순서 변경용, nullable
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/price-item/delete

예약 가격 항목을 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "770e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 타임슬롯 관리

#### GET /external/admin/reservation/time-slots

예약 타임슬롯 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `contentId`: [선택] 컨텐츠 ID (UUID)
- `startsAfter`: [선택] 시작일 이후 (ISO 8601)
- `startsBefore`: [선택] 시작일 이전 (ISO 8601)
- `isActive`: [선택] 활성 상태 (기본값: true)
- `orderBy`: [선택] 정렬 순서 (기본값: startAt_asc)
- `page`: [선택] 페이지 번호 (기본값: 1)
- `pageSize`: [선택] 페이지 크기 (기본값: 20, 최대: 500)

**응답**:
```json
{
  "list": [
    {
      "id": "990e8400-e29b-41d4-a716-446655440000",
      "startAt": "2025-06-01T12:00:00.000Z",
      "endAt": "2025-06-01T14:00:00.000Z",
      "totalCapacity": 40,
      "minGroupSize": 1,
      "maxGroupSize": 4,
      "visitIntervalMinutes": 30,  // nullable
      "openConfig": {
        "openType": "GRADED",
        "openStartAtByGrade": {
          "AS00": "2025-04-01T10:00:00.000Z",
          "AS01": "2025-05-01T10:00:00.000Z",
          "AS02": "2025-05-01T10:00:00.000Z",
          "AS03": "2025-05-01T10:00:00.000Z",
          "AS04": "2025-05-01T10:00:00.000Z",
          "AS05": "2025-05-01T10:00:00.000Z"
        }
      },
      "isActive": true,
      "createdAt": "2025-01-01T00:00:00.000Z",
      "updatedAt": "2025-01-01T00:00:00.000Z",
      "content": {
        "id": "660e8400-e29b-41d4-a716-446655440000",
        "name": "런치 코스"
      },
      "reservationCount": 5,
      "availableCapacity": 35,
      "availableSections": [  // optional
        {
          "name": "메인 홀",
          "totalCapacity": 60,
          "minGroupSize": 2,
          "maxGroupSize": 20,
          "availableCapacity": 40,
          "totalUnits": 6,
          "availableUnits": 4
        },
        {
          "name": "VIP 룸",
          "totalCapacity": 30,
          "minGroupSize": 6,
          "maxGroupSize": 15,
          "availableCapacity": 20,
          "totalUnits": 3,
          "availableUnits": 2
        }
      ]
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 1,
  "totalCount": 10
}
```

**필드 설명**:
- `reservationCount`: 해당 타임슬롯의 PENDING/CONFIRMED 상태 예약 건수
- `availableCapacity`: 예약 가능 인원수
  - SIMPLE_COUNT 전략: totalCapacity - 예약된 인원수
  - FFD_SIMULATION 전략: 사용 가능한 유닛들의 총 수용 인원수
- `availableSections`: 섹션별 예약 가능 정보 (선택적)
  - `name`: 섹션 이름
  - `totalCapacity`: 섹션의 총 수용 가능 인원
  - `minGroupSize`: 해당 섹션에서 예약 가능한 최소 그룹 크기
  - `maxGroupSize`: 해당 섹션에서 예약 가능한 최대 그룹 크기
  - `availableCapacity`: 섹션의 현재 예약 가능 인원
  - `totalUnits`: 전체 유닛 수
  - `availableUnits`: 가용 유닛 수

#### POST /external/admin/reservation/time-slot/create

예약 타임슬롯을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "contentId": "660e8400-e29b-41d4-a716-446655440000",  // [필수]
  "startAt": "2025-06-01T18:00:00.000Z",  // [필수]
  "endAt": "2025-06-01T20:00:00.000Z",  // [필수]
  "totalCapacity": 40,  // [필수] 최소 1
  "minGroupSize": 1,  // [필수] 최소 1
  "maxGroupSize": 4,  // [필수] 최소 1
  "visitIntervalMinutes": 30,  // [선택] 5~480분
  "openConfig": {  // [필수]
    "openType": "BATCH",
    "openStartAt": "2025-05-01T10:00:00.000Z",
    "openEndAt": "2025-05-25T23:59:59.000Z",
    "reservationByHours": 24,  // [선택]
    "modificationByHours": 3  // [선택]
  },
  "isActive": true  // [선택] 기본값: true
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/time-slot/batch-create

예약 타임슬롯을 일괄 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "contentId": "660e8400-e29b-41d4-a716-446655440000",  // [필수]
  "operatingStartDate": "2025-06-01T00:00:00.000Z",  // [필수]
  "operatingEndDate": "2025-06-30T23:59:59.000Z",  // [필수]
  "minGroupSize": 1,  // [필수] 최소 1
  "maxGroupSize": 4,  // [필수] 최소 1
  "visitIntervalMinutes": 30,  // [선택] 5~480분
  "openConfig": {  // [필수]
    "openType": "GRADED",
    "modificationByDays": 2,  // [선택]
    "reservationByDays": 1,  // [선택]
    "modificationByHours": 3  // [선택]
  },
  "timeSlotTemplates": [  // [필수] 최소 1개
    {
      "operatingHours": {  // [필수]
        "days": ["MON", "WED", "FRI"],  // [필수] 최소 1개
        "hours": [  // [필수] 최소 1개
          {"openTime": "14:00", "closeTime": "16:30"}
        ]
      },
      "calculateCapacityFromUnits": true,  // [선택]
      "totalCapacity": 100  // [선택]
    }
  ],
  "timeUnit": 60,  // [선택] 기본값: 60, 30~1440분
  "holidays": {  // [필수]
    "dates": ["2025-06-05"],
    "weekdays": ["SUN"]
  },
  "isActive": true  // [선택] 기본값: true
}
```

<Note>
  **openConfig 타입별 설정**

  - **BATCH**: 일괄 오픈 - openStartAt, openEndAt 필수
  - **SEQUENTIAL**: 순차 오픈 - openStartByDays, openEndByDays 필수
  - **GRADED**: 등급별 차등 오픈 - openStartAtByGrade 선택적 (미제공 시 SKS_RESERVATION_POLICY로 자동 계산)
</Note>

**응답**:
```json
{
  "count": 50
}
```

#### POST /external/admin/reservation/time-slot/update

예약 타임슬롯을 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",  // [필수]
  "startAt": "2025-06-01T18:00:00.000Z",  // [선택]
  "endAt": "2025-06-01T20:00:00.000Z",  // [선택]
  "totalCapacity": 150,  // [선택] 최소 1
  "minGroupSize": 2,  // [선택] 최소 1
  "maxGroupSize": 6,  // [선택] 최소 1
  "visitIntervalMinutes": null,  // [선택] nullable, 5~480분
  "openConfig": {  // [선택]
    "openType": "SEQUENTIAL",
    "openStartByDays": 7,
    "openEndByDays": 1,
    "modificationByHours": 3
  },
  "isActive": false  // [선택]
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/time-slot/delete

예약 타임슬롯을 삭제합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000"  // [필수]
}
```

**응답**: 없음 (200 OK)

### 예약 관리

#### POST /external/admin/reservations

예약 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",  // [선택]
  "contentId": "660e8400-e29b-41d4-a716-446655440000",  // [선택]
  "hostId": "770e8400-e29b-41d4-a716-446655440000",  // [선택] 단일 호스트 ID
  "hostIds": ["770e8400...", "880e8400..."],  // [선택] 복수 호스트 ID 배열
  "memberId": "880e8400-e29b-41d4-a716-446655440000",  // [선택]
  "statusIn": ["PENDING", "CONFIRMED"],  // [선택] ReservationStatus 배열
  "reasonCodeIn": ["USER_CREATE_PENDING"],  // [선택] ReservationStatusReasonCode 배열
  "hasUnit": true,  // [선택] 유닛 할당 여부 (true: 할당된 것만, false: 미할당만)
  "startsAfter": "2025-06-01T00:00:00.000Z",  // [선택]
  "startsBefore": "2025-06-30T23:59:59.000Z",  // [선택]
  "createdAfter": "2025-05-01T00:00:00.000Z",  // [선택]
  "createdBefore": "2025-05-31T23:59:59.000Z",  // [선택]
  "memName": "홍길동",  // [선택]
  "memNo": "LGM1234567890",  // [선택]
  "phoneNumber": "+821012345678",  // [선택]
  "sn": "LGR202506",  // [선택] 예약번호 부분 검색
  "includesStats": false,  // [선택] 기본값: false
  "shouldMask": true,  // [선택] 기본값: true
  "orderBy": "createdAt_desc",  // [선택] 기본값: createdAt_desc
  "page": 1,  // [선택] 기본값: 1
  "pageSize": 20  // [선택] 기본값: 20, 최대: 500
}
```

**응답** (includesStats=false):
```json
{
  "list": [
    {
      "id": "990e8400-e29b-41d4-a716-446655440000",
      "sn": "LGR20250615001",
      "status": "CONFIRMED",
      "groupSize": 4,
      "phoneNumber": "+821012345678",
      "gradeAtIssue": "AS03",
      "requestNote": "창가 자리 요청",  // nullable
      "additionalInfo": {  // nullable
        "visitTime": "19:30",
        "vehicleNumber": "123-가-1234",
        "needsShowroomTour": false,
        "needsProductConsultation": false
      },
      "createdAt": "2025-06-01T10:00:00.000Z",
      "updatedAt": "2025-06-10T14:00:00.000Z",
      "timeSlot": {
        "id": "550e8400-e29b-41d4-a716-446655440000",
        "startAt": "2025-06-15T18:00:00.000Z",
        "endAt": "2025-06-15T20:00:00.000Z",
        "content": {
          "id": "660e8400-e29b-41d4-a716-446655440000",
          "name": "LG 시그니처 레스토랑",
          "confirmConfig": {
            "confirmType": "IMMEDIATE"
          },
          "host": {
            "id": "770e8400-e29b-41d4-a716-446655440000",
            "kind": "RESTAURANT",
            "name": "LG 시그니처 레스토랑 강남점"
          },
          "space": {  // nullable
            "id": "880e8400-e29b-41d4-a716-446655440000",
            "name": "메인 홀"
          }
        }
      },
      "section": null,  // nullable
      "unit": null,  // nullable
      "member": {
        "id": "880e8400-e29b-41d4-a716-446655440000",
        "memName": "홍*동",  // 마스킹 처리
        "memNo": "LGM12****7890"  // 마스킹 처리
      },
      "couponPoolId": "cc0e8400-e29b-41d4-a716-446655440000"  // nullable
    }
  ],
  "page": 1,
  "pageSize": 20,
  "pageCount": 5,
  "totalCount": 95
}
```

**응답** (includesStats=true):
```json
{
  "list": [...],  // 위와 동일
  "page": 1,
  "pageSize": 20,
  "pageCount": 5,
  "totalCount": 100,
  "stats": {
    "totalCapacity": 1000,
    "availableCapacity": 160,
    "pendingCount": 50,
    "confirmedCount": 200,
    "cancelledCount": 30,
    "usedCount": 150,
    "noshowCount": 20,
    "totalPendingSize": 100,
    "totalConfirmedSize": 400,
    "totalCancelledSize": 60,
    "totalUsedSize": 300,
    "totalNoshowSize": 40,
    "actualReservedSize": 840,
    "actualConfirmedSize": 740,
    "actualCancelledSize": 60,
    "reservationRate": 84.0,
    "confirmationRate": 74.0,
    "utilizationRate": 40.5,
    "cancellationRate": 6.7,
    "noshowRate": 5.4,
    "timeSlotStats": [
      {
        "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",
        "startAt": "2025-06-15T18:00:00.000Z",
        "endAt": "2025-06-15T20:00:00.000Z",
        "totalCapacity": 100,
        "availableCapacity": 20,
        "pendingCount": 10,
        "confirmedCount": 30,
        "cancelledCount": 5,
        "usedCount": 0,
        "noshowCount": 0,
        "totalPendingSize": 20,
        "totalConfirmedSize": 60,
        "totalCancelledSize": 10,
        "totalUsedSize": 0,
        "totalNoshowSize": 0,
        "actualReservedSize": 80,
        "actualConfirmedSize": 60,
        "actualCancelledSize": 10,
        "reservationRate": 80.0,
        "confirmationRate": 60.0,
        "utilizationRate": 0.0,
        "cancellationRate": 11.1,
        "noshowRate": 0.0
      }
    ]
  }
}
```

#### GET /external/admin/reservation/get

예약을 상세 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
- `id`: [필수] 예약 ID (UUID)
- `shouldMask`: [선택] 마스킹 여부 (기본값: true)

**응답**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",
  "sn": "LGR20250601001",
  "status": "CONFIRMED",
  "groupSize": 2,
  "phoneNumber": "+8210****5678",  // 마스킹 처리
  "gradeAtIssue": "AS03",  // nullable
  "requestNote": "창가 자리 요청",  // nullable
  "additionalInfo": null,  // nullable
  "createdAt": "2025-06-01T00:00:00.000Z",
  "updatedAt": "2025-06-01T00:00:00.000Z",
  "timeSlot": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "startAt": "2025-06-15T14:00:00.000Z",
    "endAt": "2025-06-15T15:00:00.000Z",
    "totalCapacity": 100,
    "content": {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "name": "LG 시그니처 레스토랑",
      "confirmConfig": {
        "confirmType": "IMMEDIATE"
      },
      "host": {
        "id": "770e8400-e29b-41d4-a716-446655440000",
        "kind": "RESTAURANT",
        "name": "LG 시그니처 레스토랑 강남점"
      },
      "space": null  // nullable
    }
  },
  "section": null,  // nullable
  "unit": null,  // nullable
  "member": {
    "id": "880e8400-e29b-41d4-a716-446655440000",
    "memName": "홍*동",  // 마스킹 처리
    "memNo": "LGM12****7890"  // 마스킹 처리
  },
  "couponPoolId": "cc0e8400-e29b-41d4-a716-446655440000",  // nullable
  "priceItems": [],
  "units": [],
  "histories": [
    {
      "id": "aa1e8400-e29b-41d4-a716-446655440000",
      "status": "PENDING",
      "reason": "USER_CREATE_PENDING",
      "note": "예약 생성",  // nullable
      "createdAt": "2025-06-01T00:00:00.000Z"
    }
  ]
}
```

#### POST /external/admin/reservation/create

회원 예약을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**특징**:
- 관리자는 타임슬롯 종료 시간까지 예약 생성 가능
- 일반 사용자와 달리 예약 오픈 시간 제약 없음

**요청 바디**:
```json
{
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",  // [필수]
  "groupSize": 2,  // [필수] 최소 1
  "phoneNumber": "+821012345678",  // [필수]
  "memberId": "880e8400-e29b-41d4-a716-446655440000",  // [필수]
  "note": "관리자 메모",  // [선택] 최대 500자
  "additionalInfo": {  // [선택] 추가 정보
    "visitTime": "19:30",
    "vehicleNumber": "123-가-1234",
    "needsShowroomTour": true,
    "needsProductConsultation": false
  },
  "priceItems": [  // [선택]
    {
      "priceItemId": "770e8400-e29b-41d4-a716-446655440000",
      "quantity": 2
    }
  ],
  "unitIds": [  // [선택]
    "bb0e8400-e29b-41d4-a716-446655440000",
    "cc0e8400-e29b-41d4-a716-446655440000"
  ]
}
```

**응답**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",
  "sn": "LGR20250601001"
}
```

#### POST /external/admin/reservation/create-for-guest

비회원 예약을 생성합니다.

**인증**: 필요 (adminProtectedProcedure)

**특징**:
- 멤버십 회원이 아닌 고객의 예약 생성
- 이름과 전화번호만으로 예약 가능
- 시스템 내부적으로 GUEST_SYSTEM 계정 사용
- 쿠폰 사용 불가

**요청 바디**:
```json
{
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",  // [필수]
  "groupSize": 2,  // [필수] 최소 1
  "phoneNumber": "+821012345678",  // [필수]
  "guestName": "홍길동",  // [필수] 비회원 이름
  "requestNote": "비회원 예약 요청사항",  // [선택] 최대 500자
  "sectionId": "770e8400-e29b-41d4-a716-446655440000",  // [선택]
  "additionalInfo": {  // [선택] 추가 정보
    "visitTime": "19:30",
    "vehicleNumber": "123-가-1234"
  },
  "note": "관리자 메모"  // [선택] 최대 500자
}
```

**응답**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",
  "sn": "LGR20250601002"
}
```

#### POST /external/admin/reservation/update

예약을 수정합니다.

**인증**: 필요 (adminProtectedProcedure)

**특징**:
- 관리자는 시간 제한 없이 언제든지 예약 수정 가능
- 예약 상태 변경 시 FSM 규칙 적용

<Warning>
**변경 불가능한 항목:**
- 섹션 ID (sectionId) - 한 번 배정된 섹션은 변경 불가
- 유닛 ID (unitId) - 한 번 배정된 유닛은 변경 불가
- 그룹 크기 (groupSize) - 유닛 배정 전에는 변경 불가
  - 유닛 배정 전 에러: "유닛 배정 전에는 인원 변경이 불가능합니다. 예약을 취소 후 다시 생성해 주세요."
  - 유닛 배정 후: FFD 알고리즘이 실시간으로 가능 범위 체크
</Warning>

**요청 바디**:
```json
{
  "id": "990e8400-e29b-41d4-a716-446655440000",  // [필수]
  "timeSlotId": "550e8400-e29b-41d4-a716-446655440000",  // [선택] 타임슬롯 변경
  "groupSize": 3,  // [선택] 최소 1
  "phoneNumber": "+821098765432",  // [선택]
  "requestNote": "업데이트된 요청사항",  // [선택] 최대 500자
  "additionalInfo": {  // [선택] 추가 정보
    "visitTime": "20:00",
    "vehicleNumber": "234-나-5678",
    "needsShowroomTour": false,
    "needsProductConsultation": true
  },
  "note": "관리자 메모"  // [선택] 최대 500자 (이력에 저장)
}
```

**응답**: 없음 (200 OK)

#### POST /external/admin/reservation/status/bulk-change

예약 상태를 대량 변경합니다.

**인증**: 필요 (adminProtectedProcedure)

**특징**:
- NOSHOW 처리 지원 (CONFIRMED → NOSHOW)
- CANCELLED, USED 등 모든 상태 변경 가능
- 관리자는 시간 제한 없이 상태 변경 가능

**요청 바디**:
```json
{
  "ids": [  // [필수] 최소 1개
    "990e8400-e29b-41d4-a716-446655440000",
    "aa0e8400-e29b-41d4-a716-446655440000"
  ],
  "status": "NOSHOW",  // [필수] ReservationStatus (PENDING, CONFIRMED, USED, CANCELLED, NOSHOW)
  "note": "관리자 노쇼 처리"  // [선택] 최대 500자
}
```

**응답**:
```json
{
  "successCount": 1,
  "failedIds": ["aa0e8400-e29b-41d4-a716-446655440000"]
}
```

#### POST /external/admin/reservation/lottery/process-results

추첨 결과를 처리합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "contentId": "660e8400-e29b-41d4-a716-446655440000",  // [필수]
  "lotteryDate": "2025-05-15",  // [필수] YYYY-MM-DD 형식
  "winnerIds": [  // [필수] 최소 1개
    "990e8400-e29b-41d4-a716-446655440000",
    "aa0e8400-e29b-41d4-a716-446655440000"
  ]
}
```

**응답**:
```json
{
  "winnerCount": 2,
  "loserCount": 8
}
```

### 회원 관리

#### GET /external/admin/member/get-coupons

회원의 쿠폰 목록을 조회합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 파라미터**:
```json
{
  "memberId": "880e8400-e29b-41d4-a716-446655440000",  // [선택] memberId 또는 memNo 중 하나 필수
  "memNo": "LGM1234567890",  // [선택] memberId 또는 memNo 중 하나 필수
  "kind": "HOME_APPLIANCE_CONCIERGE"  // [선택] MembershipBenefitsKind
}
```

**응답**:
```json
{
  "list": [
    {
      "sn": "COUPON202501150001",
      "status": "ISSUED",  // CouponPoolStatus: ISSUED, REDEEMED, EXPIRED
      "issuedAt": "2025-01-01T09:00:00.000Z",
      "redeemedAt": "2025-01-10T14:30:00.000Z",  // nullable
      "startDate": "2025-01-01T00:00:00.000Z",
      "endDate": "2025-12-31T23:59:59.000Z",
      "coupon": {
        "kind": "FREE_APPLIANCE_RELOCATION_SERVICE",  // IntegratedCouponKind
        "name": "무료 가전 이전 설치 서비스",
        "discountType": "PASS",  // CouponDiscountType: FIXED, PERCENTAGE, PASS
        "discountValue": "0",
        "maxDiscount": "0"
      },
      "reservation": {  // nullable
        "id": "990e8400-e29b-41d4-a716-446655440000"
      }
    },
    {
      "sn": "COUPON202501150002",
      "status": "REDEEMED",
      "issuedAt": "2025-01-05T10:00:00.000Z",
      "redeemedAt": "2025-01-12T15:45:00.000Z",
      "startDate": "2025-01-05T00:00:00.000Z",
      "endDate": "2025-06-30T23:59:59.000Z",
      "coupon": {
        "kind": "LOUNGE_ACCESS",
        "name": "LG 시그니처 라운지 이용권",
        "discountType": "PASS",
        "discountValue": "0",
        "maxDiscount": "0"
      },
      "reservation": {
        "id": "aa0e8400-e29b-41d4-a716-446655440000"
      }
    }
  ]
}
```

#### POST /external/admin/member/use-coupon

예약에 대해 회원의 가상 쿠폰을 사용 처리합니다.

**인증**: 필요 (adminProtectedProcedure)

**요청 바디**:
```json
{
  "reservationId": "990e8400-e29b-41d4-a716-446655440000",  // [필수] 예약 ID
  "memberId": "880e8400-e29b-41d4-a716-446655440000",  // [선택] memberId 또는 memNo 중 하나 필수
  "memNo": "LGM1234567890",  // [선택] memberId 또는 memNo 중 하나 필수
  "couponKind": "SKS_DINING_MEAL_DISCOUNT",  // [필수] CouponKind (DB에 등록된 쿠폰만 가능)
  "note": "관리자 수동 쿠폰 처리"  // [선택] 최대 500자
}
```

**쿠폰 종류** (CouponKind - DB에 등록된 쿠폰만 사용 가능):
- `SKS_DINING_MEAL_DISCOUNT`: SKS 레스토랑 식사권 (2년간 각 1회)
- `SKS_DINING_SIGNATURE_BEVERAGE_FREE`: SKS 시그니처 음료권 (일 2회, 블랙 등급만)
- `FREE_ADMISSION_ART_CENTER_SHOW`: LG 아트센터 무료 관람권
- `LG_TWINS_TICKET_DISCOUNT`: LG 트윈스 경기 관람 할인권
- `SUBSCRIPTION_REWARD`: 구독 리워드 쿠폰

**처리 과정**:
1. 가상 쿠폰을 실제 CouponPool 레코드로 생성
2. 즉시 REDEEMED 상태로 설정
3. 예약과 쿠폰 연결
4. 사용 이력 생성

**제한 조건**:
- 예약 상태가 `CONFIRMED`여야 함
- 예약에 이미 쿠폰이 연결되어 있지 않아야 함
- 예약 회원과 입력 회원이 일치해야 함
- 회원 등급이 해당 쿠폰 사용 가능 등급이어야 함
- 쿠폰별 사용 가능 횟수를 초과하지 않아야 함

**응답**: 없음 (200 OK)

**에러 코드**:
- `FDE-C-002`: 예약/회원/쿠폰 정보를 찾을 수 없음
- `FDE-A-002`: 검증 실패
  - 예약이 CONFIRMED 상태가 아님
  - 이미 쿠폰이 사용된 예약
  - 예약 회원과 입력 회원 불일치
  - 해당 등급에서 쿠폰 사용 불가
  - 사용 가능 횟수 초과

## 에러 코드

| 코드 | HTTP 상태 | 설명 | 대응 방법 |
| --- | --- | --- | --- |
| FDE-C-001 | 400 | 요청 데이터가 유효하지 않음 | 요청 형식 및 필수 파라미터 확인 |
| FDE-A-001 | 401 | 인증 오류 | 유효한 JWT 토큰으로 요청 |
| FDE-A-002 | 403 | 권한 부족 또는 비즈니스 로직 제약 위반 | 오류 메시지의 세부 내용 확인 |
| FDE-C-002 | 404 | 요청한 리소스를 찾을 수 없음 | 올바른 ID 확인 |
| FDE-C-003 | 409 | 고유 제약 조건 실패(중복 데이터) | 이미 존재하는 데이터인지 확인 |
| FDE-C-004 | 409 | 외래 키 제약 조건 실패 | 연결된 데이터 먼저 처리 후 재시도 |
| FDE-C-101 | 500 | 내부 서버 오류 | 서버 관리자에게 문의 |

## 예약 타입별 사용 예시

### 자유 예약 (Section/Unit 미지정)
```json
{
  "timeSlotId": "timeslot-uuid",
  "sectionId": null,
  "unitId": null,
  "groupSize": 2,
  "phoneNumber": "+821012345678"
}
```
사용 사례: 자유석 공연, 일반 입장권

### 구역 예약 (Section만 지정)
```json
{
  "timeSlotId": "timeslot-uuid",
  "sectionId": "hall-section-uuid",
  "unitId": null,
  "groupSize": 4,
  "phoneNumber": "+821012345678"
}
```
사용 사례: 레스토랑 홀/룸 선택, 공연장 구역 선택

### 지정석 예약 (Section + Unit 지정)
```json
{
  "timeSlotId": "timeslot-uuid",
  "sectionId": "floor-1-section-uuid",
  "unitId": "seat-1F-15-uuid",
  "groupSize": 1,
  "phoneNumber": "+821012345678"
}
```
사용 사례: 아트센터 지정석, 레스토랑 특정 테이블

## 비즈니스 로직

### 예약 생성 플로우

1. 회원이 예약 컨텐츠와 시간대 선택
2. 약관 동의 확인 (필수 약관 체크)
3. 쿠폰 사용 가능 여부 확인 (프리미엄 라운지, SKS 다이닝 등)
4. `confirmConfig`에 따라 예약 상태 결정:
   - 즉시 확정: CONFIRMED 상태로 생성
   - 관리자 승인: PENDING 상태로 생성
   - 추첨: PENDING 상태로 생성 후 추첨일에 처리
5. 예약 생성 및 이력 기록
6. 쿠폰 사용 시 상태 업데이트

### 예약 상태 전이

- **PENDING → CONFIRMED**: 관리자 승인 또는 추첨 당첨
- **CONFIRMED → USED**: QR 스캔 또는 관리자 수동 처리
- **CONFIRMED → NOSHOW**: 사용일 다음날 자동 처리
- **모든 상태 → CANCELLED**: 취소 처리 (권한에 따라 제한)

### 권한별 가능 작업

- **사용자**: 예약 생성, 수정, 취소 (PENDING/CONFIRMED 상태에서만)
- **관리자**: 모든 상태에서 수정/취소 가능, 상태 직접 변경 가능
- **시스템**: 추첨, 만료, 노쇼 등 자동 처리