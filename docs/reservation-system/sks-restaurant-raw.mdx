---
title: 'SKS 레스토랑 예약 시스템 요구사항 (Raw)'
description: 'SKS 서울 다이닝/카페 예약 시스템 상세 요구사항 정리'
icon: 'file-lines'
---

## 1. 용어 정의

### 1.1 예약 관련 용어

| 용어 | 정의 |
|------|------|
| **예약** | 유저/관리자가 특정 컨텐츠의 특정 일자를 점유하는 행위 |
| **예약 가능 기간** | 유저/관리자가 예약할 수 있는 일자의 범위<br/>예: 9/3 기준 블랙 유저는 11/30까지, 나머지는 10/31까지 |
| **예약 오픈** | 예약 가능 기간을 설정하는 행위 (매월 1일 오전 10시) |
| **이용일/방문일** | 예약 요청 시 선택한 실제 방문 예정일 |

### 1.2 좌석 관련 용어

| 용어 | 정의 |
|------|------|
| **좌석 타입** | 예약 시 선택하는 좌석 그룹 (룸/홀) |
| **좌석 배정** | 좌석 타입 내에서 구체적인 자리를 지정하는 행위<br/>예: 1번 테이블, 2번 테이블 |

### 1.3 쿠폰 관련 용어

| 용어 | 정의 |
|------|------|
| **보유 쿠폰** | 유저가 보유한 모든 쿠폰 (만료/사용완료 포함) |
| **컨텐츠 보유 쿠폰** | 보유 쿠폰 중 해당 컨텐츠에 해당하는 쿠폰 |
| **사용 가능 쿠폰** | 유효기간이 남아있고 미사용 상태인 쿠폰 |
| **컨텐츠 사용 가능 쿠폰** | 사용 가능 쿠폰 중 해당 컨텐츠에만 사용 가능한 쿠폰 |

## 2. 예약 정책

### 2.1 예약 가능 기간

<Card title="등급별 예약 가능 기간" icon="calendar">
  **다이아몬드 블랙**
  - 조회일 기준 익익월까지 예약 가능
  - 매월 1일 오전 10시 익익월 오픈

  **나머지 등급**
  - 조회일 기준 익월까지 예약 가능
  - 매월 1일 오전 10시 익월 오픈
</Card>

### 2.2 예약/취소/변경 가능 시점

| 구분 | 유저 | 관리자 |
|------|------|---------|
| **예약 가능** | 이용일 1일 전 23:59:59까지 | 이용일 직전까지 |
| **예약 취소 가능** | 이용일 2일 전 23:59:59까지 | 이용일 직전까지 |
| **예약 변경 가능** | 이용일 2일 전 23:59:59까지 | 이용일 직전까지 |

### 2.3 예약 제한 사항

<Warning>
  **예약 제한**
  - 당일 예약 불가
  - 유저당 각 컨텐츠 하루 1번만 예약 가능 (회원식별자로 유니크 체크)
  - 홀 타입 5-6인 예약은 하루 2건으로 제한
  - 로그인 필수

  **좌석 운영 방식**
  - 일반 레스토랑과 달리 타임슬롯이 없음
  - 하루에 한 좌석은 한 번만 예약 (좌석 회전 없음)
  - 컨텐츠당 정원이 차면 예약 마감
</Warning>

## 3. 좌석 구조

### 3.1 전체 좌석 구성

<Card title="좌석 구성" icon="chair">
  **룸**
  - 1개 (4-8인)
  - 룸 선택 시 예약과 동시에 자동 배정 (룸이 1개뿐이므로)

  **홀**
  - 4인 테이블: 6개
  - 6인 테이블: 2개
  - 총 8개 테이블
</Card>

### 3.2 좌석별 인원 제한

| 좌석 타입 | 최소 인원 | 최대 인원 |
|-----------|-----------|-----------|
| 룸 | 4명 | 8명 |
| 홀 (4인 테이블) | 2명 | 4명 |
| 홀 (6인 테이블) | 2명 | 6명 |

## 4. 유저 예약 기능

### 4.1 예약 생성

**입력 항목**
- 이름/전화번호: 회원 정보 자동 불러오기 (수정 불가)
- 예약일자: 예약 가능 기간 내 선택
- 좌석 타입: 룸/홀 단일 선택
- 인원: 좌석 타입별 최소/최대 인원 내 선택
- 방문 시간: 30분 단위 (다이닝 11:00-14:00, 카페 15:00-18:00)
- 요청사항: 텍스트 입력 (최대 100자)
- 추가 옵션: 쇼룸투어, 제품상담 (복수 선택 가능)
- 차량 정보: 차량 유무 및 번호

### 4.2 예약 취소

- 이용일 2일 전 23:59:59까지 가능
- 좌석 배정 후에도 취소 가능
- 취소 패널티 없음
- 유저/관리자 취소 구분하여 저장

### 4.3 예약 변경

**변경 가능 항목**
- 인원: 좌석 배정 후에만 제한적 변경
  - 4인 테이블: 2-4명 범위
  - 6인 테이블: 2-6명 범위
- 방문 시간
- 요청사항
- 차량 정보
- 추가 옵션

### 4.4 빈자리 알림

- 정원 마감된 날짜에 취소 발생 시 알림
- 하루 10명 제한
  - 대기 개념이 아닌 알림 후 직접 예약 방식이므로 제한 적용
- 날짜 단위로 신청 (시간대별 아님)
- 알림받은 후 직접 예약 필요 (자동 예약 아님)

### 4.5 예약 오픈 알림

- 매월 1일 오전 10시 예약 오픈 시 푸시 발송
- 사전 신청자에게만 발송
- 등급별 차등 없이 동일 시점 알림

### 4.6 초대장 보내기

- 카카오톡 공유 기능
- 템플릿 ID: 123732
- 예약 정보 포함하여 발송

**템플릿 변수 구조**
```
일시: ${월}월 ${일}일 ${시}시 ${분}분
장소: 시그니처 키친 스위트 논현
${이름}님의 초대장이 도착했어요.
예약 정보를 확인해 보세요.
```
- 버튼 링크: 웹 도메인 연결 필요

## 5. 관리자 예약 기능

### 5.1 관리자 예약 생성

**입력 항목**
- 이름/전화번호: 강제 직접 입력 (회원 조회 기능 없음)
- 예약일자: 예약 가능 기간 내 선택
- 좌석 타입: 룸/홀 단일 선택
- 인원: 최소 2명부터 가능
- 방문 시간: 30분 단위
- 알러지: 텍스트 입력 (최대 100자)
- 추가 옵션: 쇼룸투어, 제품상담

**특징**
- 이용일 직전까지 예약 가능
- 예약 가능 기간은 영향 받음

### 5.2 관리자 예약 취소

- 이용 시간 이후 취소 불가
- 이용 직전까지 취소 가능
- 빈자리 알림 고려 필요

### 5.3 관리자 예약 변경

**변경 가능 항목**
- 이름/전화번호 변경 가능
- 기타 모든 항목 변경 가능
- 이용 시간 직전까지 변경 가능

### 5.4 좌석 배정 관리

**배정 규칙**
- 예약 확정 상태에서만 가능
- 이용일 당일까지만 가능
- 크로스 배정 불가 (룸↔홀)
- 홀 내 4인↔6인 테이블 변경은 가능
  - 테이블 타입 변경 시 유저는 인지하지 못함
- 룸은 1개이므로 예약 즉시 자동 배정

**특이사항**
- 좌석 미배정 상태로도 이용완료/노쇼 처리 가능

## 6. 쿠폰 시스템

### 6.1 쿠폰 종류

<CardGroup cols={2}>
  <Card title="식사권" icon="utensils">
    **1쿠폰 1사용 방식**
    - 다이아몬드 블랙: 50% 할인 (본인+동반1인)
    - 다이아몬드: 30% 할인 (본인+동반1인)
    - 플래티넘: 20% 할인 (본인+동반1인)
    - 골드: 10% 할인 (본인+동반1인)

    **룸차지 제외**
  </Card>

  <Card title="음료권" icon="coffee">
    **1쿠폰 N사용 방식**
    - 다이아몬드 블랙: 시그니처 음료 무료
    - 1일 1회, 최대 2인
    - 나머지 등급: 해당 없음
  </Card>
</CardGroup>

### 6.2 쿠폰 발급 정책

**가상 쿠폰 방식**
- 실제 쿠폰 발급이 아닌 조회 시점 실시간 계산
- 뉴베스트 API를 통해 등급 정보 조회 → 사용 가능 여부 판단
- 사용 시마다 CouponPool에 레코드 생성

**식사권 정책**
- 등급 기간(2년)을 1년 단위로 구분
- 1년차: 1회 사용 가능
- 2년차: 1회 사용 가능
- 사용 시 CouponPool에 REDEEMED 상태로 기록

**음료권 정책**
- 블랙 등급(AS00) 전용
- 매일 1회 사용 가능 (일 단위 리셋)
- 사용 시마다 CouponPool에 기록하여 히스토리 관리
- 오늘 사용 여부는 redeemedAt 기준으로 체크

**사용 가능 횟수 계산**
| 쿠폰 종류 | 등급 | 계산 방식 |
|-----------|------|-----------|
| 식사권 | 전체 | 등급 시작일 기준 1년차/2년차 구분하여 각 1회 |
| 음료권 | 블랙만 | 매일 1회, 당일 사용 여부만 체크 |

### 6.3 관리자 쿠폰 적용

- 이용 후 카운터에서 처리
- SKS 관련 쿠폰만 조회 가능 (식사권, 음료권)
- 다른 쿠폰 제외 (LG 트윈스, 아트센터 등)
- 쿠폰 상세 확인 후 사용 처리

## 7. 알림 시스템

### 7.1 알림 발송 시점

| 이벤트 | 방법 | 대상 | 발송 시점 |
|--------|------|------|-----------|
| **예약 확정** | 알림톡, 푸시 | 예약 당사자 | 상태 변경 시 |
| **예약 리마인드** | 알림톡, 푸시 | 예약 당사자 | D-1 오전 10시<br/>D-0 오전 10시 |
| **예약 취소 (유저)** | 알림톡, 푸시 | 예약 당사자 | 상태 변경 시 |
| **예약 취소 (관리자)** | 알림톡, 푸시 | 예약 당사자 | 상태 변경 시 |
| **예약 변경 (유저)** | 알림톡, 푸시 | 예약 당사자 | 변경 완료 시 |
| **예약 변경 (관리자)** | 알림톡, 푸시 | 예약 당사자 | 변경 완료 시 |
| **빈자리 발생** | 알림톡, 푸시 | 알림 신청자 | 취소 발생 시 |
| **예약 오픈** | 푸시 | 알림 신청자 | 오픈 완료 시 |
| **이용 완료** | 알림톡, 푸시 | 예약 당사자 | 상태 변경 5시간 후 |
| **노쇼** | 없음 | - | - |

### 7.2 알림 특이사항

<Note>
  - 유저/관리자 변경 구분 없이 동일 템플릿 사용
  - 전화번호 변경 시 이후 알림은 변경된 번호로 발송
  - 예약 오픈은 푸시만 발송 (알림톡 제외)
</Note>

## 8. 예약 가능일 오픈

### 8.1 오픈 방식

<Card title="타임슬롯 사전 생성 방식" icon="calendar-check">
  **구현 방식**
  - 관리자가 타임슬롯 일괄 생성
  - openStartAtByGrade로 등급별 오픈 시점 설정
  - 스케줄러 없이 자동 오픈

  **등급별 오픈 시점**
  - 다이아몬드 블랙: 매월 1일 10시 (2개월 전)
  - 나머지 등급: 매월 1일 10시 (1개월 전)

  **동작 원리**
  - 조회 시 현재 시간과 유저 등급으로 실시간 필터링
  - 설정된 시간이 되면 자동으로 예약 가능
  - 예약 오픈 알림 신청자에게 푸시 발송
</Card>

### 8.2 타임슬롯 설정 예시

```typescript
// 3월 타임슬롯 생성 시 설정
{
  date: '2025-03-15',
  openConfig: {
    openType: 'GRADED',
    openStartAtByGrade: {
      'AS00': '2025-01-01T10:00:00',  // 블랙: 1월 1일부터
      'AS01': '2025-02-01T10:00:00',  // 다이아몬드: 2월 1일부터
      'AS02': '2025-02-01T10:00:00',  // 플래티넘: 2월 1일부터
      'AS03': '2025-02-01T10:00:00',  // 골드: 2월 1일부터
      'AS04': '2025-02-01T10:00:00',  // 실버: 2월 1일부터
      'AS05': '2025-02-01T10:00:00'   // 실버(미구매): 2월 1일부터
    }
  }
}
```

### 8.3 고려 사항

<Note>
  **화면 갱신**
  - 사용자가 화면을 보고 있는 상태에서 오픈 시간 도래 시
  - 자동 새로고침 필요 여부 결정 필요
  - BO 설정 또는 하드코딩 가능
</Note>

## 9. 정책 확정 사항

<Card title="확정된 정책" icon="check">
  **인원 관련**
  - 룸 최소 인원: 4명 (2명 아님)

  **좌석 배정**
  - 관리자 좌석 지정 시 타입 변경: 가능

  **패널티**
  - 예약 취소/노쇼 패널티: 없음
  - 월 3회 취소/변경 제한: 없음

  **예약 가능 시점**
  - 유저 예약 취소: 이용 2일 전 23:59:59까지
  - 관리자 예약 취소: 이용 직전까지
  - 당일 예약: 불가 (1일 전 23:59:59까지)

  **예약 오픈**
  - 매월 1일 오전 10시 일괄 오픈
  - 익월: 모든 등급
  - 익익월: 블랙 유저만
</Card>